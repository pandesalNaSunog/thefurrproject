<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="style.css">
    <script src="../js/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
    <!-- <script src="../js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/bootstrap.min.css"> -->
    
    
    <script>
        $(document).ready(function(){
            var globalWellnessRecordId = 0;
            var globalConfinementId = 0;
            var addConfinementStatusError = $('#add-confinement-status-error');
            var addConfinementStatus = $('#add-confinement-status');
            var confirmAddConfinementStatus = $('#confirm-add-confinement-status');
            var confinedPetsTable = $('#confined-pets-table');
            var globalPetId = 0;
            var globalUserId = 0;
            var globalVetTechId = 0;
            var globalApppointmentId = 0;
            var vetTechList = $('#vet-tech-list');
            var navLink = $('.navigation');
            var clientLink = $('#client-link');
            var clientSection = $('#clients-section');
            var logout = $('#logout');
            var clientsTable = $('#clients-table')
            var petsTable = $('#pets-table');
            var searchClient = $('#search-client');
            var searchClientText = $('#search-client-text');
            var profileName = $('#profile-name');
            var initialCheckupsTable = $('#initial-check-ups-table');
            var medicalHistory = $('#medical-history');
            var wellness = $('#wellness');
            var weight = $('#weight');
            var temp = $('#temp');
            var hr = $('#hr');
            var rr = $('#rr');
            var physicalExam = $('#physical-exam');
            var ccHx = $('#cc-hx');
            var dxTools = $('#dx-tools');
            var tdx = $('#tdx');
            var treatment = $('#treatment');
            var inPatient = $('#in-patient');
            var surgery = $('#surgery');
            var outPatient = $('#out-patient');
            var takeHomeMeds = $('#take-home-meds');
            var confirmInsertMedicalRecord = $('#confirm-insert-medical-record');
            var checkupDate = $('#check-up-date');
            var wellnessRecordTable = $('#wellness-record-table');
            var appointmentsList = $('#appointment-list');
            var appointmentSection = $('#appointments-section');
            var clientsSection = $('#clients-section');
            var appointmentLink = $('#appointment-link');
            var clientLink = $('#client-link');
            var navigation = $('.navigation');
            var noAppointments = $('#no-appointments');
            var petsClientName = $('#client-name');
            var recordsPetName = $('#records-pet-name');
            var recordsClientName = $('#records-client-name');
            var chooseVetAssistant = $('#choose-vet-assistant');
            var patientOwnerName = $('#patient-owner-name');
            var patientName = $('#patient-name');
            var clientCode = $('#client-code');
            var medicalRecordWeight = $('#medical-record-weight');
            var medicalRecordTemp = $('#medical-record-temp');
            var medicalRecordHr = $('#medical-record-hr');
            var medicalRecordRR = $('#medical-record-rr');
            var medicalRecordTests = $('#medical-record-tests');
            var medicalRecordProcedures = $('#medical-record-procedures');
            var medicalRecordMedication = $('#medical-record-medication');
            var medicalRecordCaseClosed = $('#medical-record-case-closed');
            var medicalRecordNextAppointment = $('#medical-record-next-appointment');
            var medicalRecordConfirm = $('#medical-record-confirm');
            var medicalRecordRemarks = $('#medical-record-remarks');
            var medicalRecordService = $('#medical-record-service');
            var medicalRecordClientName = $('#medical-record-client-name');
            var medicalRecordClientCode = $('#medical-record-client-code');
            var medicalRecordPetName = $('#medical-record-pet-name');
            var medicalRecordsTable = $('#medical-records-table');
            var labRequest = $('#lab-request');
            var confirmLabRequest = $('#confirm-lab-request');
            var labRequestTable = $('#lab-request-table');
            var refreshLabRequests = $('#refresh-lab-requests');
            var labResultPatientName = $('#lab-result-patient-name');
            var labResultLabRequest = $('#lab-result-lab-request');
            var labResultAttendingVet = $('#lab-result-attending-vet');
            var labResultsList = $('#lab-results-list');
            var chooseVetTech = $('#choose-vet-tech');
            var timeLimit = $('#time-limit');
            var chooseVetTechDropDownIsActive = false;
            var servicesList = $('#services-list');
            var chooseService = $('#choose-service');
            var confirmService = $('#confirm-service');
            var basePrice = $('#base-price');
            var quantity = $('#quantity');
            var soaTable = $('#soa-table');
            var chooseServiceDropdownIsActive = false;
            var customService = $('#custom-service');
            var customBasePrice = $('#custom-base-price');
            var customQuantity = $('#custom-quantity');
            var confirmCustomService = $('#confirm-custom-service');
            var submitSoa = $('#submit-soa');
            var customServiceCategory = $('#custom-service-category');
            var servicesLink = $('#services-link');
            var servicesSection = $('#services-section');
            var laboratoryList = $('#laboratory-list');
            var emergencyList = $('#emergency-list');
            var surgeryList = $('#surgery-list');
            var vetLabRequestTable = $('#vet-lab-request-table');
            var labRequestLink = $('#lab-request-link');
            var labRequestSection = $('#lab-request-section');
            var serviceAttendingLabTech = $('#service-attending-lab-tech')
            var customServiceAttendingLabTech = $('#custom-service-attending-lab-tech');
            var customServiceAttendingLabTechList = $('#custom-service-attending-lab-tech-list');
            var serviceAttendingLabTechList = $('#service-attending-lab-tech-list');
            var soaDetailsTable = $('#soa-details-table');
            var clientPetsList = $('#client-pets-list');
            var insertPetName = $('#insert-pet-name');
            var insertPetBreed = $('#insert-pet-breed');
            var insertPetSpecies = $('#insert-pet-species');
            var insertPetSex = $('#insert-pet-sex');
            var insertPetBirthDate = $('#insert-pet-birth-date');
            var confirmInsertPet = $('#confirm-insert-pet');
            var confirmBook = $('#confirm-book');
            var refreshSpinner = $('#refresh-spinner');
            var confirmBookSpinner = $('#confirm-book-spinner');
            var addClientName = $('#add-client-name');
            var addClientEmail = $('#add-client-email');
            var addClientContact = $('#add-client-contact');
            var addClientCode = $('#add-client-code');
            var confirmAddClient = $('#confirm-add-client');
            var addClientCodeError = $("#add-client-code-error");
            var addCLientNameError = $('#add-client-name-error')
            var balance = $('#balance');
            var currentPasswordModal = $('#enter-current-password-modal');
            var confirmPassword = $('#confirm-password');
            var currentPassword = $('#current-password');
            var currentPasswordError = $('#current-password-error');
            var editPasswordModal = $('#edit-password-modal')
            var newPassword = $('#new-password')
            var newPasswordError = $('#new-password-error');
            var retypeNewPassword = $('#retype-new-password');
            var retypeNewPasswordError = $('#retype-new-password-error');
            var confirmNewPassword = $('#confirm-new-password');
            var doctorLabResultPatientName = $('#doctor-lab-result-patient-name');
            var doctorLabResultLabRequest = $("#doctor-lab-result-lab-request");
            var doctorLabResultAttendingVet = $("#doctor-lab-result-attending-vet");
            var doctorLabResultsList = $('#doctor-lab-results-list');
            var loadingScreen = $('#loading-screen');
            var timeLimitError = $('#time-limit-error');
            var labRequestError = $('#lab-request-error');
            var yesterdayAppointmentsList = $('#yesterday-appointment-list');
            var tomorrowAppointmentsList = $('#tomorrow-appointment-list');
            var soaClientName = $('#soa-client-name');
            var soaPatientName = $('#soa-patient-name');
            var soaClientCode = $('#soa-client-code');
            var medication = $('#medication');
            var totalAmount = $('#total-amount');
            var paymentsTable = $('#payments-table');
            var soaAttendingVet = $('#soa-attending-vet');
            var confinementLink = $('#confinement-link');
            var confinementSection = $('#confinement-section');
            var confinementCLientName = $('#confinement-client-name');
            var confinementContact = $('#confinement-contact');
            var confinementPetName = $('#confinement-pet-name');
            var confinementSpecies = $('#confinement-species');
            var confinementBreed = $('#confinement-breed');
            var confinementBirthDate = $('#confinement-birthdate');
            var confinementSex = $('#confinement-sex');
            var confinementTypeOfFluid = $('#confinement-type-of-fluid');
            var confinementDripRate = $('#confinement-drip-rate');
            var confinementDurationofFluid = $('#confinement-duration-of-fluid');
            var confinementTempDef = $('#confinement-temp-def');
            var viewConfinementDetailsModal = $('#view-confinement-details-modal');
            var confinementStatusTable = $('#confinement-status-table');
            var icusTable = $('#icus-table');
            var infusionPumpsTable = $('#infusion-pumps-table');
            var syringePumpsTable = $('#syringe-pumps-table');
            var antibioticsTable = $('#antibiotics-table');
            var vitaminsTable = $('#vitamins-table');
            var otherMedicinesTable = $('#other-medicines-table');
            var specialMedicinesTable = $('#special-medicines-table');
            var laboratoryTable = $('#laboratory-table');
            var foodTable = $('#food-table');
            var ivCanullaTable = $('#iv-canulla-table');
            var ivLineTable = $('#iv-line-table');
            var ivFluidTable = $('#iv-fluid-table');
            var underpadsTable = $('#underpads-table');
            var nebulizationTable = $('#nebulization-table');
            var laserTable = $('#laser-table');
            var oxygenTable = $('#oxygen-table');
            var confinementRecordTable = $('#confinement-record-table')
            var confinementPatientDetails = $('#confinement-patient-details')
            var confinementChargesModal = $("#confinement-charges-modal");
            var generateConfinementSoa = $('#generate-confinement-soa');
            var editClientName = $('#edit-client-name');
            var editClientNameError = $("#edit-client-name-error");
            var editClientEmail = $('#edit-client-email');
            var editClientEmailError = $('#edit-client-email-error');
            var editClientCode = $('#edit-client-code');
            var editClientCodeError = $('#edit-client-code-error');
            var editClientContact = $('#edit-client-contact');
            var editClientContactError = $('#edit-client-contact-error');
            var confirmEditClient = $('#confirm-edit-client');
            var editPetName = $('#edit-pet-name');
            var editPetBreed = $('#edit-pet-breed');
            var editPetSpecies = $('#edit-pet-species');
            var editPetSex = $('#edit-pet-sex');
            var editPetBirthDate = $('#edit-pet-birth-date');
            var confirmEditPet = $("#confirm-edit-pet");
            var editPetModal = $('#edit-pet-modal');
            var petsModal = $('#pets-modal');
            var clientDetails = $('#client-details');
            var editService = $('#edit-service');
            var editPetWeight = $('#edit-pet-weight');
            var editRemarks = $('#edit-remarks');
            var editNextAppointment = $('#edit-next-appointment');
            var confirmEditWellnessRecord = $('#confirm-edit-wellness-record');
            var editWellnessRecordModal = $('#edit-wellness-record-modal')
            var wellnessRecordModal = $('#wellness-record-modal');
            var medicalRecordMedicalHistory = $('#medical-record-history');
            var medicalRecordChiefComplain = $('#medical-record-chief-complain');
            var medicalRecordTDXDDXCase = $('#medical-record-tdx-ddx-case');
            var medicalRecordNextService = $('#medical-record-next-service');
            var globalMedicalRecordId = 0;
            var editMedicalRecordWeight = $('#edit-medical-record-weight');
            var editMedicalRecordTemp = $('#edit-medical-record-temp');
            var editMedicalRecordHr = $('#edit-medical-record-hr');
            var editMedicalRecordRR = $('#edit-medical-record-rr');
            var editMedicalRecordHistory = $('#edit-medical-record-history');
            var editMedicalRecordChiefComplain = $('#edit-medical-record-chief-complain');
            var editMedicalRecordTests = $('#edit-medical-record-tests');
            var editMedicalRecordProcedures = $('#edit-medical-record-procedures');
            var editMedicalRecordTdx = $('#edit-medical-record-tdx-ddx-case');
            var editMedicalRecordMedication = $('#edit-medical-record-medication');
            var confirmEditMedicalRecord = $('#confirm-edit-medical-record');
            var editMedicalRecordModal = $('#edit-medical-record-modal');
            var viewMedicalRecordsModal = $('#view-medical-records-modal');

            confirmEditMedicalRecord.on('click', function(){
                if(confirm("Please confirm.") == true){
                    confirmEditMedicalRecord.prop('disabled', true)
                    $.ajax({
                        type: 'POST',
                        url: 'php/updateMedicalRecord.php',
                        data:{
                            weight: editMedicalRecordWeight.val(),
                            temp: editMedicalRecordTemp.val(),
                            hr: editMedicalRecordHr.val(),
                            rr: editMedicalRecordRR.val(),
                            history: editMedicalRecordHistory.val(),
                            chief_complain: editMedicalRecordChiefComplain.val(),
                            tests: editMedicalRecordTests.val(),
                            procedures: editMedicalRecordProcedures.val(),
                            tdx: editMedicalRecordTdx.val(),
                            medication: editMedicalRecordMedication.val(),
                            id: globalMedicalRecordId
                        },
                        success: function(response){
                            confirmEditMedicalRecord.prop('disabled', false);
                            if(response == 'ok'){
                                editMedicalRecordModal.modal('hide');
                                viewMedicalRecordsModal.modal('show');
                                getMedicalRecords()
                            }
                        }
                    })
                }
            })
            confirmEditWellnessRecord.on('click', function(){
                confirmEditWellnessRecord.prop('disabled', true);
                $.ajax({
                    type: 'POST',
                    url: 'php/editWellnessRecord.php',
                    data:{
                        id: globalWellnessRecordId,
                        service: editService.val(),
                        pet_weight: editPetWeight.val(),
                        remarks: editRemarks.val(),
                        next_appointment: editNextAppointment.val(),
                    },
                    success: function(response){
                        confirmEditWellnessRecord.prop('disabled', false);
                        editWellnessRecordModal.modal('hide');
                        wellnessRecordModal.modal('show');
                        if(response == 'ok'){
                            getPetWellnessRecords();
                        }
                    }
                })
            })
            confirmEditPet.on('click', function(){
                confirmEditPet.prop('disabled', true)
                confirmEditPet.text('Please Wait');

                $.ajax({
                    type: 'POST',
                    url: 'php/editPet.php',
                    data:{
                        pet_id: globalPetId,
                        name: editPetName.val(),
                        breed: editPetBreed.val(),
                        species: editPetSpecies.val(),
                        sex: editPetSex.val(),
                        birth_date: editPetBirthDate.val(),
                    },
                    success: function(response){
                        confirmEditPet.prop('disabled', false)
                        confirmEditPet.text('Confirm')

                        editPetModal.modal('hide');
                        petsModal.modal('show');
                        if(response == 'ok'){
                            getClientPets()
                        }
                    }
                })
            })


            
            confirmEditClient.on('click', function(){

                if(editClientName.val() == ""){
                    editClientName.addClass('is-invalid');
                    editClientError.text('Please fill out this field')
                }else if(editClientCode.val() == ""){
                    editClientCode.addClass('is-invalid');
                    editClientCodeError.text('Please fill out this field')
                }else{
                    confirmEditClient.prop('disabled', true);
                    $.ajax({
                        type: 'POST',
                        url: 'php/editClient.php',
                        data:{
                            client_name: editClientName.val(),
                            email: editClientEmail.val(),
                            contact: editClientContact.val(),
                            client_code: editClientCode.val(),
                            client_id: globalClientId
                        },
                        success: function(response){
                            confirmEditClient.prop('disabled', false);
                            if(response == 'ok'){
                                location.reload();
                            }
                        }
                    })
                }
                
            })
            
            newPassword.on('keydown', function(){
                newPassword.removeClass('is-invalid');
            })

            retypeNewPassword.on('keydown', function(){
                retypeNewPassword.removeClass('is-invalid');
            })


            generateConfinementSoa.on('click', function(){
                generateConfinementSoa.prop('disabled', true)
                $.ajax({
                    type: 'POST',
                    url: 'php/generateConfinementSoa.php',
                    data: {
                        confinement_id: globalConfinementId
                    },
                    success: function(response){
                        generateConfinementSoa.prop('disabled', false)
                        if(response == 'ok'){
                            alert('Confinement Charges has been generated');
                        }
                    }
                })
            })
            confirmNewPassword.on('click', function(){
                if(newPassword.val() == ""){
                    newPasswordError.text('Please fill out this field');
                    newPassword.addClass('is-invalid');
                }else if(retypeNewPassword.val() == ""){
                    retypeNewPassword.text('Please fill out this field');
                    retypeNewPassword.addClass('is-invalid');
                }else if(newPassword.val() != retypeNewPassword.val()){
                    retypeNewPassword.addClass('is-invalid');
                    retypeNewPasswordError.text('Password Mismatch');
                }else{  
                    confirmNewPassword.text('Updating')
                    confirmNewPassword.prop('disabled', true);
                    $.ajax({
                        type: 'POST',
                        url: 'php/updatePassword.php',
                        data:{
                            password: newPassword.val(),
                        },
                        success: function(response){
                            confirmNewPassword.prop('disabled', false);
                            confirmNewPassword.text('Confirm');
                            if(response == 'ok'){
                                alert('Password has been updated successfully.');
                                newPassword.val('')
                                retypeNewPassword.val('')
                                editPasswordModal.modal('hide');
                            }else{
                                alert('Session expired. Please log in to continue.');

                                window.location.replace('index.html');
                            }
                        }
                    })
                }
            })


            currentPassword.on('keydown', function(){
                currentPassword.removeClass('is-invalid');
                currentPasswordError.text('Please fill out this field');
            })
            confirmPassword.on('click', function(){
                if(currentPassword.val() == ""){
                    currentPassword.addClass('is-invalid');
                }else{
                    confirmPassword.prop('disabled', true);
                    confirmPassword.text('Please Wait');
                    $.ajax({
                        type: 'POST',
                        url: 'php/verifyPassword.php',
                        data:{
                            password: currentPassword.val(),
                        },
                        success: function(response){
                            confirmPassword.prop('disabled', false);
                            confirmPassword.text('Confirm');

                            if(response == 'ok'){
                                currentPasswordModal.modal('hide')
                                currentPassword.val('');

                                editPasswordModal.modal('show');
                            }else if(response == 'session expired'){
                                alert('Session expired. Please log in to continue.');
                                window.location.replace('index.html');
                            }else{
                                currentPassword.addClass('is-invalid');
                                currentPasswordError.text('Invalid Password');
                            }
                        }
                    })
                }
            })
            
            addClientCode.on('keydown', function(){
                addClientCode.removeClass('is-invalid');
            })
            addClientName.on('keydown', function(){
                addClientName.removeClass('is-invalid');
            })
            confirmAddClient.on('click', function(){
                if(addClientCode.val() == ""){
                    addClientCode.addClass('is-invalid');
                    addCLientCodeError.text('Please fill out this field');
                }else if(addClientName.val() == ""){
                    addClientName.addClass('is-invalid');
                    addCLientNameError.text('Please fill out this field');
                }else{
                    $.ajax({
                        type: 'POST',
                        url: 'php/addClient.php',
                        data:{
                            name: addClientName.val(),
                            email: addClientEmail.val(),
                            code: addClientCode.val(),
                            contact: addClientContact.val()
                        },
                        success: function(response){
                            if(response != 'client code already exists'){
                                alert('Client added successfully');
                                var data = JSON.parse(response);
                                addToClientsTable(clientsTable.children().length, data.attending_vet, data.contact_no, data.name, data.client_code, data.id)
                                addClientName.val('');
                                addClientEmail.val('');
                                addClientContact.val('');
                                addClientCode.val('');
                                $('#add-client-modal').modal('hide');
                            }else{
                                addClientCode.addClass('is-invalid');
                                addClientCodeError.text('This client code already exists.');
                            }
                            
                        }
                    })
                }
            })

            confirmBookSpinner.hide();
            refreshSpinner.hide();




            confirmBook.on('click', function(){
                var petIds = [];
                var checked = 0;
                $(clientPetsList.children()).each(function(index){
                    if($(this).find('input').prop('checked') == true){
                        petIds.push($(this).find('.form-check').children().eq(2).val())
                    }
                })

                if(petIds.length == 0){
                    alert('Please choose atleast one pet.');
                }else{
                    confirmBook.prop('disabled', true);
                    confirmBookSpinner.show();
                    $.ajax({
                        type: 'POST',
                        url: 'php/bookAppointment.php',
                        data:{
                            pet_ids: petIds,
                            user_id: globalUserId
                        },
                        success: function(response){
                            confirmBook.prop('disabled', false);
                            confirmBookSpinner.hide();
                            if(response == 'ok'){
                                alert('Successfully Booked! Please proceed to Appointments Tab to view recently booked appointment.');
                                $('#client-booking-modal').modal('hide');
                            }
                        }
                    })
                }
                
            })

            confirmInsertPet.on('click', function(){
                if(confirm("Confirm?") == true){
                    $.ajax({
                        type: 'POST',
                        url: 'php/addNewPet.php',
                        data:{
                            name: insertPetName.val(),
                            breed: insertPetBreed.val(),
                            species: insertPetSpecies.val(),
                            sex: insertPetSex.val(),
                            birth_date: insertPetBirthDate.val(),
                            user_id: globalUserId
                        },
                        success: function(response){
                            var data = JSON.parse(response);
                            addToPetsTable(petsTable.children().length , data.pet_id, data.name, data.breed, data.species, data.sex, data.age);
                            insertPetName.val('')
                            insertPetBreed.val('')
                            insertPetSpecies.val('')
                            insertPetBirthDate.val('')
                        }
                    })
                }
            })

            serviceAttendingLabTechList.val('0');


            serviceAttendingLabTech.on('click', function(){
                serviceAttendingLabTechList.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getVetTechnicians.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            serviceAttendingLabTechList.append(`<li><button value="${value.id}" class="service-lab-tech dropdown-item">${value.name}</button></li>`);
                            var serviceLabTech = serviceAttendingLabTechList.children().eq(index).find('.service-lab-tech');

                            serviceLabTech.on('click', function(){

                                serviceAttendingLabTech.text($(this).text());
                                serviceAttendingLabTech.val($(this).val());
                            })
                        })
                        serviceAttendingLabTechList.append(`<li><button value="" class="service-lab-tech dropdown-item">Clear</button></li>`);
                        var serviceLabTech = serviceAttendingLabTechList.children().eq(serviceAttendingLabTechList.children().length - 1).find('.service-lab-tech');

                        serviceLabTech.on('click', function(){

                            serviceAttendingLabTech.text('Choose Attending Lab Tech');
                            serviceAttendingLabTech.val($(this).val());
                        })
                    }
                })
            })

            customServiceAttendingLabTech.on('click', function(){
                customServiceAttendingLabTechList.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getVetTechnicians.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            customServiceAttendingLabTechList.append(`<li><button value="${value.id}" class="custom-service-lab-tech dropdown-item">${value.name}</button></li>`);
                            var customServiceLabTech = customServiceAttendingLabTechList.children().eq(index).find('.custom-service-lab-tech');

                            customServiceLabTech.on('click', function(){

                                customServiceAttendingLabTech.text($(this).text());
                                customServiceAttendingLabTech.val($(this).val());
                            })
                        })

                        customServiceAttendingLabTechList.append(`<li><button value="" class="custom-service-lab-tech dropdown-item">Clear</button></li>`);
                            var customServiceLabTech = customServiceAttendingLabTechList.children().eq(customServiceAttendingLabTechList.children().length - 1).find('.custom-service-lab-tech');

                            customServiceLabTech.on('click', function(){

                                customServiceAttendingLabTech.text('Choose Attending Lab Tech');
                                customServiceAttendingLabTech.val($(this).val());
                            })

                        
                    }
                })
            })


            var serviceCategories = [];
            var soaServices = [];
            var soaBasePrices = [];
            var soaTotalPrices = [];
            var soaQuantities = [];
            var soaDiscounts = [];
            var soalabTechIds = [];


            submitSoa.on('click', function(){

                if(confirm("Confirm Submission of Statement of Accounts? Consider reviewing the details first.") == true){
                    $.ajax({
                        type: 'POST',
                        url: 'php/submitSoa.php',
                        data:{
                            pet_id: globalPetId,
                            lab_tech_ids: soalabTechIds,
                            services: soaServices,
                            base_prices: soaBasePrices,
                            total_prices: soaTotalPrices,
                            quantities: soaQuantities,
                            discounts: soaDiscounts,
                            categories: serviceCategories,
                        },
                        success: function(response){              
                            if(response == 'ok'){
                                alert('Statement of Accounts has been successfully submitted.');
                                soaTable.children().remove();
                                clearSoa();
                            }
                        }
                    })
                }
                
            })


            function clearSoa(){
                soaServices = [];
                soaBasePrices = [];
                soaTotalPrices = [];
                soaQuantities = [];
                soaDiscounts = [];
                serviceCategories = [];
                soalabTechIds = [];
            }

            confirmCustomService.on('click', function(){
                if(customService.val() == ""){
                    customService.addClass('is-invalid');
                }else if(customBasePrice.val() == ""){
                    customBasePrice.addClass('is-invalid');
                }else if(customQuantity.val() == ""){
                    customQuantity.addClass('is-invalid');
                }else{
                    var total = parseFloat(customBasePrice.val()) * parseFloat(customQuantity.val());
                    var index = soaTable.children().length;
                    if(customServiceAttendingLabTech.val() == ""){
                        customServiceAttendingLabTech.val(0);
                    }
                    addToSoaTable(index, customServiceAttendingLabTech.val(), customService.val(), customBasePrice.val(), customQuantity.val(), total);
                    alert('Successfully added.');
                    serviceCategories.push(customServiceCategory.val());
                    customServiceAttendingLabTech.text('Choose Attending Vet Tech')
                    customServiceAttendingLabTech.val(0);
                    customBasePrice.val('');
                    customQuantity.val('')
                    customService.val('');
                }
            })

            confirmService.on('click', function(){
                if(chooseService.text() == "Choose Service"){
                    alert('Please choose a service.');
                }else if(basePrice.val() == ""){
                    basePrice.addClass('is-invalid');
                }else if(quantity.val() == ""){
                    quantity.addClass('is-invalid');
                }else{
                    var total = parseFloat(basePrice.val()) * parseFloat(quantity.val());
                    var index = soaTable.children().length;

                    if(serviceAttendingLabTech.val() == ""){
                        serviceAttendingLabTech.val(0);
                    }
                    addToSoaTable(index, serviceAttendingLabTech.val(), chooseService.text(), basePrice.val(), quantity.val(), total);
                    alert('Successfully added.');
                    serviceCategories.push(chooseService.val());
                    basePrice.val('');
                    quantity.val('')
                    serviceAttendingLabTech.val(0);
                    serviceAttendingLabTech.text('Choose Attending Vet Tech')
                    chooseService.text('Choose Service')
                }
            })

            function addToSoaTable(index, labtechId, service, basePrice, quantity, total){
                soaServices.push(service)
                soaBasePrices.push(basePrice);
                soaQuantities.push(quantity);
                soaTotalPrices.push(total);
                soaDiscounts.push(0);
                soalabTechIds.push(labtechId);
                soaTable.append(`<tr>
                                    <td>${service}</td>
                                    <td>&#8369 ${basePrice}</td>
                                    <td>${quantity}</td>
                                    <td>&#8369 <span class="total-price">${total}</span></td>
                                    <td>
                                        <input type="number" class="form-control discount" value=0>
                                    </td>
                                </tr>`)
                var discount = soaTable.children().eq(index).find('.discount');
                var totalPrice = soaTable.children().eq(index).find('.total-price');
                discount.on('change', function(){
                    var thisDiscount = $(this);
                    var rate = thisDiscount.val()

                    if(rate == ""){
                        thisDiscount.val(0);
                        rate = 0;
                    }
                    var percentage = parseFloat(parseFloat(rate) / parseFloat(100) * total);
                    var discountedPrice = parseFloat(total - percentage);
                    totalPrice.text(discountedPrice);
                    soaDiscounts[index] = rate;
                    soaTotalPrices[index] = discountedPrice;
                })
            }

            basePrice.on('keydown', function(){
                basePrice.removeClass('is-invalid');
            })
            quantity.on('keydown', function(){
                quantity.removeClass('is-invalid');
            })

            chooseService.on('click', function(){
                chooseServiceDropdownIsActive = !chooseServiceDropdownIsActive;
                if(chooseServiceDropdownIsActive == true){
                    servicesList.children().remove();
                    $.ajax({
                        type: 'GET',
                        url: 'php/getServices.php',
                        success: function(response){
                            var data = JSON.parse(response);
                        
                            $(data).each(function(index, value){
                                addToServicesList(index, value.category, value.service)
                            })
                        }
                    })
                }
                
            })


            function addToSpecialMedicinesTable(index,id,specialMedicine, price, date){
                specialMedicinesTable.append(`<tr>
                                    <td>
                                        <input class="form-control special-medicine" placeholder="Special Medicine" value="${specialMedicine}">
                                        <div class="invalid-feedback special-medicine-error"></div>
                                    </td>
                                    <td>
                                        <input type="number" class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>${date}</td>
                                    
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = specialMedicinesTable.children().eq(index).find('.delete');
                let specialMedicineInput = specialMedicinesTable.children().eq(index).find('.special-medicine')
                let specialMedicineError = specialMedicinesTable.children().eq(index).find('.special-medicine-error');
                let priceError = specialMedicinesTable.children().eq(index).find('.price-error');
                let priceInput = specialMedicinesTable.children().eq(index).find('.price');
                let update = specialMedicinesTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(specialMedicineInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(specialMedicineInput.val() == ""){
                        specialMedicineInput.addClass('is-invalid');
                        specialMedicineError.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateSpecialMedicine.php',
                            data:{
                                price: priceInput.val(),
                                special_medicine: specialMedicineInput.val(),
                                special_medicine_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })
                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteSpecialMedicines.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            
            function addToServicesList(index, category, service){
                servicesList.append(`<li>
                                        <button value="${category}" class="service dropdown-item">${service}</button>
                                    </li>`)
                var service = servicesList.children().eq(index).find('.service');

                service.on('click', function(){
                    chooseService.val($(this).val())
                    chooseService.text($(this).text())
                })
            }

            chooseVetTech.on('click', function(){
                chooseVetTechDropDownIsActive = !chooseVetTechDropDownIsActive;
                if(chooseVetTechDropDownIsActive == true){
                    $.ajax({
                        type: 'GET',
                        url: 'php/getVetTechnicians.php',
                        success: function(response){
                            var data = JSON.parse(response);
                            vetTechList.children().remove();
                            $(data).each(function(index, value){
                                addToChooseVetTechList(index, value.id, value.name)
                            })
                            vetTechList.append(`<li>
                                        <button class="vet-tech dropdown-item" value=0>Clear</button>
                                    </li>`)
                            var vetTech = vetTechList.children().eq(vetTechList.children().length - 1).find('.vet-tech');

                            vetTech.on('click', function(){
                                globalVetTechId = $(this).val()
                                chooseVetTech.text('Choose Vet Tech')
                            })

                        }
                    })
                }

                
            })

            function addToChooseVetTechList(index, id, name){
                vetTechList.append(`<li>
                                        <button class="vet-tech dropdown-item" value="${id}">${name}</button>
                                    </li>`)

                var vetTech = vetTechList.children().eq(index).find('.vet-tech');

                vetTech.on('click', function(){
                    globalVetTechId = $(this).val()
                    chooseVetTech.text($(this).text())
                })
            }

            refreshLabRequests.on('click', function(){
                refreshSpinner.show();
                refreshLabRequests.prop('disabled', true);
                getPetLabRequestsFunc();
            })
            labRequest.on('keydown', function(){
                labRequest.removeClass('is-invalid');
            })

            timeLimit.on('keydown', function(){
                timeLimit.removeClass('is-invalid');
            })

            confirmLabRequest.on('click', function(){
                if(labRequest.val() == ""){
                    labRequest.addClass('is-invalid');
                    labRequestError.text('Please fill out this field.');
                }else if(timeLimit.val() == ""){
                    timeLimit.addClass('is-invalid');
                    timeLimitError.text('Please fill out this field');
                }else{
                    confirmLabRequest.prop('disabled', true)
                    confirmLabRequest.text('Submitting...');
                    $.ajax({
                        type: 'POST',
                        url: 'php/sendLabRequest.php',
                        data:{
                            pet_id: globalPetId,
                            request: labRequest.val(),
                            vet_tech_id: globalVetTechId,
                            time_limit: timeLimit.val(),
                            appointment_id: globalApppointmentId
                        },
                        success: function(response){
                            confirmLabRequest.prop('disabled', false)
                            confirmLabRequest.text('Submit Lab Request');
                            if(response != 0){
                                alert('Lab Request has been submitted.');
                                labRequest.val('')
                                chooseVetTech.text('Choose Vet Tech');
                                globalVetTechId = 0;
                                timeLimit.val('');
                                var data = JSON.parse(response);
                                labRequestTable.append(`<tr>
                                                            <td>${data.date}</td>
                                                            <td>${data.time_limit}</td>
                                                            <td>${data.request}</td>
                                                            <td>${data.lab_tech}</td>
                                                            <td>${data.doctor}</td>
                                                            <td>Pending</td>
                                        
                                                        </tr>`)
                            }else{
                                alert('Session Expired. Please Log in to continue.');
                            }
                        }
                    })
                }
            })


            medicalRecordConfirm.on('click', function(){
                if(confirm('Save Medical Record?') == true){
                    $.ajax({
                        type:'POST',
                        url: 'php/addMedicalRecord.php',
                        data:{
                            medical_history: medicalRecordMedicalHistory.val(),
                            chief_complain: medicalRecordChiefComplain.val(),
                            tdx_ddx_case: medicalRecordTDXDDXCase.val(),
                            next_service: medicalRecordNextService.val(),
                            pet_id: globalPetId,
                            appointment_id: globalApppointmentId,
                            client_id: globalUserId,
                            weight: medicalRecordWeight.val(),
                            temp: medicalRecordTemp.val(),
                            hr: medicalRecordHr.val(),
                            rr: medicalRecordRR.val(),
                            tests: medicalRecordTests.val(),
                            procedures: medicalRecordProcedures.val(),
                            medication: medicalRecordMedication.val(),
                            case_closed: medicalRecordCaseClosed.val(),
                            next_appointment: medicalRecordNextAppointment.val(),
                            vet_nurse: chooseVetAssistant.val(),
                            remarks: medicalRecordRemarks.val(),
                            service: medicalRecordService.val()
                        },
                        success: function(response){
                            if(response == 'ok'){
                                alert('Medical Record has been successfully added.')
                                $('#create-patient-records-modal').find('input').val('');
                                $('#create-patient-records-modal').find('textarea').val('');
                                var newPatientName = patientName.text();
                                newPatientName = newPatientName.replace(" (no medical record inputted)","");
                                patientName.text(newPatientName);
                            }
                        }
                    })
                }
            })


            chooseVetAssistant.on('focus', function(){
                $(this).children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getVetNurses.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            chooseVetAssistant.append(`<option value="${value.name}">${value.name}</option>`)
                        })
                    }
                })
            })
            function getAppointments(){
                loadingScreen.show()
                appointmentsList.children().remove();
                yesterdayAppointmentsList.children().remove();
                tomorrowAppointmentsList.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getAppointments.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            noAppointments.hide();
                            addToAppointmentsList(index, value.day, value.appointment_id, value.client_name, value.date, value.time, value.pets,value.concern,value.is_done);
                        })
                    }
                })
            }


            function addToOtherMedicinesTable(index,id,otherMedicine, price, date){
                otherMedicinesTable.append(`<tr>
                                    <td>
                                        <input class="form-control other-medicine" placeholder="Medicine" value="${otherMedicine}">
                                        <div class="invalid-feedback other-medicine-error"></div>
                                    </td>
                                    <td>
                                        <input type="number" class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>${date}</td>
                                    
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = otherMedicinesTable.children().eq(index).find('.delete');
                let otherMedicineInput = otherMedicinesTable.children().eq(index).find('.other-medicine')
                let otherMedicineError = otherMedicinesTable.children().eq(index).find('.other-medicine-error');
                let priceError = otherMedicinesTable.children().eq(index).find('.price-error');
                let priceInput = otherMedicinesTable.children().eq(index).find('.price');
                let update = otherMedicinesTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(otherMedicineInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(otherMedicineInput.val() == ""){
                        otherMedicineInput.addClass('is-invalid');
                        otherMedicineError.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateOtherMedicine.php',
                            data:{
                                price: priceInput.val(),
                                other_medicine: otherMedicineInput.val(),
                                other_medicine_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })
                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteOtherMedicines.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToLaboratoryTable(index,id,laboratory, price, date){
                laboratoryTable.append(`<tr>
                                    <td>

                                        <input class="form-control laboratory" placeholder="Price" value="${laboratory}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>
                                        <input type="number" class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>${date}</td>
                                    
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = laboratoryTable.children().eq(index).find('.delete');
                let laboratoryInput = laboratoryTable.children().eq(index).find('.laboratory')
                let laboratoryInputError = laboratoryTable.children().eq(index).find('.laboratory-error');
                let priceError = laboratoryTable.children().eq(index).find('.price-error');
                let priceInput = laboratoryTable.children().eq(index).find('.price');
                let update = laboratoryTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(laboratoryInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(laboratoryInput.val() == ""){
                        laboratoryInput.addClass('is-invalid');
                        laboratoryInputError.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateLaboratory.php',
                            data:{
                                price: priceInput.val(),
                                laboratory: laboratoryInput.val(),
                                laboratory_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteLaboratory.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToVitaminsTable(index,id,vitamins, price, date){
                vitaminsTable.append(`<tr>
                                    <td>
                                        <input class="form-control vitamins" placeholder="Price" value="${vitamins}">
                                        <div class="invalid-feedback vitamins-error"></div>
                                    </td>
                                    <td>
                                        <input class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>${date}</td>
                                    
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = vitaminsTable.children().eq(index).find('.delete');
                let vitaminsInput = vitaminsTable.children().eq(index).find('.vitamins')
                let vitaminsInputError = vitaminsTable.children().eq(index).find('.vitamins-error');
                let priceError = vitaminsTable.children().eq(index).find('.price-error');
                let priceInput = vitaminsTable.children().eq(index).find('.price');
                let update = vitaminsTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(vitaminsInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(vitaminsInput.val() == ""){
                        vitaminsInput.addClass('is-invalid');
                        vitaminsInputError.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateVitamins.php',
                            data:{
                                price: priceInput.val(),
                                vitamins: vitaminsInput.val(),
                                vitamins_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })
                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteVitamins.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToICUSTable(index,date, price, id){
                icusTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="price form-control" type="number" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback">
                                        </div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = icusTable.children().eq(index).find('.delete');
                let priceInput = icusTable.children().eq(index).find('.price');
                let update = icusTable.children().eq(index).find('.update');
                let invalidFeedback = icusTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateIcu.php',
                            data:{
                                price: priceInput.val(),
                                icu_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteIcu.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToIvCanulla(index,id, price, date){
                ivCanullaTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = ivCanullaTable.children().eq(index).find('.delete');
                let priceInput = ivCanullaTable.children().eq(index).find('.price');
                let update = ivCanullaTable.children().eq(index).find('.update');
                let invalidFeedback = ivCanullaTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateIvCanulla.php',
                            data:{
                                price: priceInput.val(),
                                iv_canulla_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteIvCanulla.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToIvLineTable(index,id, price, date){
                ivLineTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = ivLineTable.children().eq(index).find('.delete');
                let priceInput = ivLineTable.children().eq(index).find('.price');
                let update = ivLineTable.children().eq(index).find('.update');
                let invalidFeedback = ivLineTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateIvLine.php',
                            data:{
                                price: priceInput.val(),
                                iv_line_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })
                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteIvLine.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToIvFluidTable(index,id, price, date){
                ivFluidTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    
                                    </td>
                                </tr>`);
                let deleteRecord = ivFluidTable.children().eq(index).find('.delete');
                let priceInput = ivFluidTable.children().eq(index).find('.price');
                let update = ivFluidTable.children().eq(index).find('.update');
                let invalidFeedback = ivFluidTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateIvFluid.php',
                            data:{
                                price: priceInput.val(),
                                iv_fluid_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteIvFluid.php',
                            data:{
                                iv_fluid_table: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToUnderpadsTable(index,id, price, date){
                underpadsTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = underpadsTable.children().eq(index).find('.delete');
                let priceInput = underpadsTable.children().eq(index).find('.price');
                let update = underpadsTable.children().eq(index).find('.update');
                let invalidFeedback = underpadsTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateUnderpad.php',
                            data:{
                                price: priceInput.val(),
                                underpad_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteUnderpad.php',
                            data:{
                                underpad_id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }
            function addToNebulization(index,id, price, date){
                nebulizationTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = nebulizationTable.children().eq(index).find('.delete');
                let priceInput = nebulizationTable.children().eq(index).find('.price');
                let update = nebulizationTable.children().eq(index).find('.update');
                let invalidFeedback = nebulizationTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateNebulization.php',
                            data:{
                                price: priceInput.val(),
                                nebulization_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteNebulization.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToLaserTable(index,id, price, date){
                laserTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = laserTable.children().eq(index).find('.delete');
                let priceInput = laserTable.children().eq(index).find('.price');
                let update = laserTable.children().eq(index).find('.update');
                let invalidFeedback = laserTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateLaser.php',
                            data:{
                                price: priceInput.val(),
                                laser_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteLaser.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToOxygenTable(index,id,date, price, hours){
                oxygenTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>
                                        <input class="form-control hours" placeholder="Hours" value="${hours}">
                                        <div class="invalid-feedback hours-error"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = oxygenTable.children().eq(index).find('.delete');
                let hoursInput = oxygenTable.children().eq(index).find('.hours')
                let hoursError = oxygenTable.children().eq(index).find('.hours-error');
                let priceError = oxygenTable.children().eq(index).find('.price-error');
                let priceInput = oxygenTable.children().eq(index).find('.price');
                let update = oxygenTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(hoursInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(hoursInput.val() == ""){
                        hoursInput.addClass('is-invalid');
                        hoursError.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateOxygen.php',
                            data:{
                                price: priceInput.val(),
                                hours: hoursInput.val(),
                                oxygen_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteOxygen.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToFoodTable(index,id, price, date){
                foodTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="form-control price" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = foodTable.children().eq(index).find('.delete');
                let priceInput = foodTable.children().eq(index).find('.price');
                let update = foodTable.children().eq(index).find('.update');
                let invalidFeedback = foodTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateFood.php',
                            data:{
                                price: priceInput.val(),
                                food_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteFood.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToConfinementRecordTable(index,date, price, id){
                confinementRecordTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = confinementRecordTable.children().eq(index).find('.delete');
                let priceInput = confinementRecordTable.children().eq(index).find('.price');
                let update = confinementRecordTable.children().eq(index).find('.update');
                let invalidFeedback = confinementRecordTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateConfinementRecord.php',
                            data:{
                                price: priceInput.val(),
                                confinement_record_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteConfinementRecord.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToSyringePumpsTable(index,date, price, id){
                syringePumpsTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = syringePumpsTable.children().eq(index).find('.delete');

                let priceInput = syringePumpsTable.children().eq(index).find('.price');
                let update = syringePumpsTable.children().eq(index).find('.update');
                let invalidFeedback = syringePumpsTable.children().eq(index).find('.invalid-feedback');
                priceInput.on('keydown', function(){
                    priceInput.removeClass('is-invalid');
                })
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateSyringePump.php',
                            data:{
                                price: priceInput.val(),
                                syringe_pump_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteSyringePump.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }
            function addToAntibioticsTable(index,id, antibiotic,price, date){
                antibioticsTable.append(`<tr>
                                    <td>
                                        <input placeholder="Antibiotic" class="form-control antibiotic" value="${antibiotic}">
                                        <div class="invalid-feedback antibiotic-error"></div>
                                    </td>
                                    <td>
                                        <input type="number" class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback price-error"></div>
                                    </td>
                                    <td>${date}</td>
                                    
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = antibioticsTable.children().eq(index).find('.delete');
                let antibioticInput = antibioticsTable.children().eq(index).find('.antibiotic')
                let antibioticError = antibioticsTable.children().eq(index).find('.antibiotic-error');
                let priceError = antibioticsTable.children().eq(index).find('.price-error');
                let priceInput = antibioticsTable.children().eq(index).find('.price');
                let update = antibioticsTable.children().eq(index).find('.update');

                removeInputError(priceInput);
                removeInputError(antibioticInput)
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        priceError.text('Please Fill out this field');
                    }else if(antibioticInput.val() == ""){
                        antibioticInput.addClass('is-invalid');
                        antibioticInput.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateAntibiotic.php',
                            data:{
                                price: priceInput.val(),
                                antibiotic: antibioticInput.val(),
                                antibiotic_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })
                
                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteAntibiotic.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function addToInfusionPumpsTable(index,date, price, id){
                infusionPumpsTable.append(`<tr>
                                    <td>${date}</td>
                                    <td>
                                        <input class="price form-control" placeholder="Price" value="${price}">
                                        <div class="invalid-feedback"></div>
                                    </td>
                                    <td>
                                        <button value="${id}" class="update btn btn-outline-primary">Update</button>
                                        <button value="${id}" class="delete btn btn-outline-primary">Delete</button>
                                    </td>
                                </tr>`);
                let deleteRecord = infusionPumpsTable.children().eq(index).find('.delete');
                let priceInput = infusionPumpsTable.children().eq(index).find('.price');
                let update = infusionPumpsTable.children().eq(index).find('.update');
                let invalidFeedback = infusionPumpsTable.children().eq(index).find('.invalid-feedback');
                
                update.on('click', function(){
                    let thisUpdate = $(this);
                    if(priceInput.val() == ""){
                        priceInput.addClass('is-invalid');
                        invalidFeedback.text('Please Fill out this field');
                    }else{
                        thisUpdate.prop('disabled', true)
                        thisUpdate.text('Updating...');

                        $.ajax({
                            type: 'POST',
                            url: 'php/updateInfusionPump.php',
                            data:{
                                price: priceInput.val(),
                                infusion_pump_id: thisUpdate.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Updated.')
                                    thisUpdate.prop('disabled', false);
                                    thisUpdate.text('Update');
                                }
                            }
                        })
                    }
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this)
                    if(confirm('Delete this record?') == true){
                        thisDelete.prop('disabled', true)
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteInfusionPump.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                })
            }

            function removeInputError(input){
                input.on('keydown', function(){
                    input.removeClass('is-invalid');
                })
            }

            function addToAppointmentsList(index, day, id, clientName, date, time, pets,concern, isDone){
                var thisConcern = "";
                if(concern == ""){
                    thisConcern = "not indicated"
                }else{
                    thisConcern = concern;
                }
                if(day == "today"){
                    appointmentsList.append(`<div class="card shadow rounded-4 mt-3">
                                            <div class="card-header">
                                                <h3 class="fw-bold">${clientName}</h3>
                                                <p><em>${date} ${time}</em></p>
                                                <p><em>Concern: ${thisConcern}</em></p>
                                            </div>
                                            <div class="card-body appointment-card">
                                                <h4 class="fw-bold">Pets</h4>
                                                <hr>
                                                <div class="pets-list mt-3">
                                                    
                                                </div>
                                            </div>
                                            <div class="card-footer">
                                                <button value="${id}" class="mark-as-done btn btn-outline-primary">Mark As Done</button>
                                                <button value="${id}" class="mark-as-undone btn btn-outline-primary">Mark As Undone</button>
                                            </div>
                                        </div>`)
                    var petsList = appointmentsList.children().eq(appointmentsList.children().length - 1).find('.pets-list');
                    var markAsDone = appointmentsList.children().eq(appointmentsList.children().length - 1).find('.mark-as-done');
                    var markAsUnDone = appointmentsList.children().eq(appointmentsList.children().length - 1).find('.mark-as-undone');
                    var appointmentCard = appointmentsList.children().eq(appointmentsList.children().length - 1).find('.appointment-card');
                    if(isDone == "yes"){
                        appointmentCard.attr("style", "background-color: #d2ffd2");
                        markAsUnDone.show()
                        markAsDone.hide()
                    }else{
                        markAsDone.show()
                        markAsUnDone.hide()
                    }


                    markAsUnDone.on('click', function(){
                        var appointmentId = $(this).val();
                        if(confirm('Mark this appointment as not done?') == true){
                            $.ajax({
                                type: 'POST',
                                url: 'php/markAppointmentAsDone.php',
                                data:{
                                    appointment_id: appointmentId,
                                    is_done: 'no'
                                },
                                success: function(response){
                                    if(response == 'ok'){
                                        markAsDone.show()
                                        markAsUnDone.hide()
                                        appointmentCard.removeAttr('style');
                                    }
                                }
                            })
                        }
                    });
                    markAsDone.on('click', function(){
                        var appointmentId = $(this).val();
                        
                        if(confirm('Mark this appointment as done?') == true){
                            $.ajax({
                                type: 'POST',
                                url: 'php/markAppointmentAsDone.php',
                                data:{
                                    appointment_id: appointmentId,
                                    is_done: 'yes'
                                },
                                success: function(response){
                                    if(response == 'ok'){
                                        markAsDone.hide()
                                        markAsUnDone.show()
                                        appointmentCard.attr("style", "background-color: #d2ffd2");
                                    }
                                }
                            })
                        }
                    })
                    $(pets).each(function(index, value){
                        petsList.append(`<div class="card shadow rounded-4 mb-3">
                                            <div class="card-body d-flex justify-content-between">
                                                <h5 class="fw-bold align-self-center">${value.name}</h5>
                                                <div class="row row-cols-2">
                                                    <div class="col-4">

                                                        <button value="${value.id}*${id}" class="services btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#create-patient-records-modal">Services</button>
                                                    </div>
                                                    <div class="col-8">

                                                        <div class="input-group">
                                                            
                                                            <input class="pet-weight form-control" placeholder="Pet Weight (For Confinement)">
                                                            
                                                            
                                                            <button value="${value.id}" class="confine btn btn-outline-primary">Confine</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>`)

                        var services = petsList.children().eq(index).find('.services');
                        var confine = petsList.children().eq(index).find('.confine');
                        var petWeight = petsList.children().eq(index).find('.pet-weight');

                        confine.on('click', function(){
                            var thisConfineBUtton = $(this);
                            if(confirm("Subject this pet for confinement?") == true){
                                thisConfineBUtton.prop('disabled', true);

                                var confinementPetId = $(this).val();
                                $.ajax({
                                    type: 'POST',
                                    url: 'php/confine.php',
                                    data:{
                                        pet_id: confinementPetId,
                                        pet_weight: petWeight.val()
                                    },
                                    success: function(response){
                                        thisConfineBUtton.prop('disabled', false);
                                        if(response == 'ok'){
                                            alert("This pet has been added to Confinement data.");
                                        }else if(response = 'confinement exists'){
                                            alert("This pet is already subjected for confinement.");
                                        }else{
                                            alert("Somethin went wrong.");
                                        }
                                    }
                                })
                            }
                            
                        })
                        services.on('click', function(){
                            globalVetTechId = 0;
                            var servicesValue = $(this).val();
                            globalPetId = servicesValue.split("*")[0];
                            globalApppointmentId = servicesValue.split("*")[1];
                            $.ajax({
                                type: 'POST',
                                url: 'php/getPetOwner.php',
                                data:{
                                    pet_id: servicesValue,
                                },
                                success: function(response){
                                    var data = JSON.parse(response);
                                    globalUserId = data.client_id;
                                    patientOwnerName.text(data.name);
                                    if(data.has_medical_record == true){
                                        patientName.text(data.pet_name);
                                    }else{
                                        patientName.text(data.pet_name + " (no medical record inputted)");
                                    }
                                    
                                    clientCode.text(data.client_code);
                                }
                            })

                            getPetLabRequestsFunc();
                            
                        })
                    })
                }else if(day == "yesterday"){
                    yesterdayAppointmentsList.append(`<tr><td>${clientName}</td><td>${thisConcern}</td><td>${date} ${time}</td></tr>`)
                }else{
                    tomorrowAppointmentsList.append(`<tr><td>${clientName}</td><td>${thisConcern}</td><td>${date} ${time}</td></tr>`)
                }
                
                

                

            }

            function getPetLabRequestsFunc(){
                labRequestTable.children().remove();
                $.ajax({
                    type: 'POST',
                    url: 'php/getPetLabRequests.php',
                    data:{
                        pet_id: globalPetId,
                        appointment_id: globalApppointmentId
                    },
                    success: function(response){
                        refreshSpinner.hide()
                        refreshLabRequests.prop('disabled', false)
                        if(response != 0){
                            var data = JSON.parse(response);
                            $(data).each(function(index, value){
                                addToLabRequestTable(index, value.id, value.request, value.time_limit, value.lab_tech, value.doctor, value.result,value.date);
                            })
                        }
                    }
                })
            }

            function addToLabRequestTable(index,id, request,timeLimit, lab_tech, doctor, result, date){
                if(result == "Pending"){
                    labRequestTable.append(`<tr>
                                            <td>${date}</td>
                                            <td>${timeLimit}</td>
                                            <td>${request}</td>
                                            <td>${lab_tech}</td>
                                            <td>${doctor}</td>
                                            <td>${result}</td>
                                        </tr>`)
                }else{
                    labRequestTable.append(`<tr>
                                            <td>${date}</td>
                                            <td>${timeLimit}</td>
                                            <td>${request}</td>
                                            <td>${lab_tech}</td>
                                            <td>${doctor}</td>
                                            <td>
                                                <button value="${id}" class="view-results btn btn-primary" data-bs-toggle="modal" data-bs-target="#view-lab-results-modal">Results</button>
                                            </td>
                                        </tr>`)

                    var viewResults = labRequestTable.children().eq(index).find('.view-results');

                    viewResults.on('click', function(){
                        var thisViewResult = $(this);
                        labResultsList.children().remove();
                        $.ajax({
                            type: 'POST',
                            url: 'php/getLabResults.php',
                            data:{
                                lab_request_id: thisViewResult.val(),
                            },
                            success: function(response){
                                var data = JSON.parse(response)

                                labResultAttendingVet.text(data.attending_vet);
                                labResultPatientName.text(data.patient_name);
                                labResultLabRequest.text(data.request);
                                
                                $(data.results).each(function(index, value){
                                    addToLabResultsList(index, value.id, value.result)
                                })
                            }
                        })
                    })
                }
                
            }

            function addToLabResultsList(index, id, result){
                labResultsList.append(`<img style="width: 100%; height: auto;" class="img-fluid" src="../lab/php/${result}">`)
            }
            function addToDoctorLabResultsList(index, id, result){
                doctorLabResultsList.append(`<img style="width: 100%; height: auto;" class="img-fluid" src="../lab/php/${result}">`)
            }

            confirmInsertMedicalRecord.on('click', function(){
                $.ajax({
                    type: 'POST',
                    url: 'php/insertMedicalRecord.php',
                    data:{
                        pet_id: globalPetId,
                        client_id: globalUserId,
                        medical_history: medicalHistory.val(),
                        wellness_behavior: wellness.val(),
                        weight: weight.val(),
                        temp: temp.val(),
                        hr: hr.val(),
                        rr: rr.val(),
                        physical_exam: physicalExam.val(),
                        cc_hx: ccHx.val(),
                        dx_tools: dxTools.val(),
                        tdx_dx_case: tdx.val(),
                        treatment: treatment.val(),
                        in_patient: inPatient.val(),
                        surgery: surgery.val(),
                        out_patient: outPatient.val(),
                        take_home_meds: takeHomeMeds.val(),
                        date: checkupDate.val(),
                        
                    },
                    success: function(response){
                        var value = JSON.parse(response);
                        addToInitialCheckupsTable(value.id, value.medical_history, value.wellness_behavior, value.pet_weight, value.temp, value.hr, value.rr, value.physical_exam, value.cc_hx,value.dx_tools,value.tdx_dx_case,value.treatment, value.in_patient, value.surgery, value.out_patient, value.take_home_meds,value.date)
                    }
                })
            })




            searchClient.on('click', function(){
                clientsTable.children().remove();
                $.ajax({
                    type: 'POST',
                    url: 'php/searchClient.php',
                    data:{
                        keyword: searchClientText.val(),
                    },
                    success: function(response){
                        if(response != 'invalid session'){
                            var data = JSON.parse(response);
                            $(data).each(function(index, value){
                                addToClientsTable(index, value.attending_vet, value.contact_no, value.name, value.client_code, value.id);
                                if(value.banned == 1){
                                    clientsTable.children().eq(index).attr("style", "background-color: #fccccc")
                                }
                            })
                        }
                    }
                })
            })
            getClients();
            getProfile();
            appointmentSection.hide();
            servicesSection.hide();
            labRequestSection.hide();
            confinementSection.hide();

            function getClients(){
                loadingScreen.show()
                clientsTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getClients.php',
                    success: function(response){
                        loadingScreen.hide();
                        if(response != 'invalid session'){
                            var data = JSON.parse(response);
                            $(data).each(function(index, value){
                                addToClientsTable(index, value.attending_vet, value.contact_no, value.name, value.client_code, value.id);
                                if(value.banned == 1){
                                    clientsTable.children().eq(index).attr("style", "background-color: #fccccc")
                                }
                            })
                        }else{
                            alert('Invalid Session. Please log in to continue.');
                            window.location.replace('index.html');
                        } 
                    }
                })
            }

            function getProfile(){
                $.ajax({
                    type: 'GET',
                    url: 'php/myProfile.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        profileName.text("Welcome, "+ data.profile_name);
                    }
                })
            }

            function addToClientPetsList(index, value){
                clientPetsList.append(`<div class="card shadow mt-3">
                                            <div class="card-body">
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input">
                                                    <label class="form-check-label">${value.name}</label>
                                                    <input type="hidden" value="${value.pet_id}">
                                                </div>
                                            </div>
                                        </div>`)
            }

            function addToClientsTable(index, vet, contact, name, code, clientId){
                clientsTable.append(`<tr>
                                        <td>${name}</td>
                                        <td>${code}</td>
                                        <td>${contact}</td>
                                        <td>${vet}</td>
                                        <td class="dropdown">

                                            <button class="normal-outline-button dropdown-toggle" data-bs-toggle="dropdown">Actions</button>

                                            <ul class="dropdown-menu">
                                                <li>
                                                    <button value="${clientId}" class="book dropdown-item" data-bs-toggle="modal" data-bs-target="#client-booking-modal">Book</button>
                                                </li>
                                                    
                                                <li>
                                                    <button value="${clientId}" class="view-pets dropdown-item" data-bs-toggle="modal" data-bs-target="#pets-modal">View Pets</button>
                                                </li>
                                                <li>
                                                    <button value="${clientId}" class="edit dropdown-item" data-bs-toggle="modal" data-bs-target="#edit-client-modal">Edit</button>
                                                </li>
                                                <li>
                                                    <button value="${clientId}" class="delete dropdown-item">Delete</button>
                                                </li>
                                            </ul>
                                                

                                        </td>
                                    </tr>`)
                var viewPets = clientsTable.children().eq(index).find('.view-pets');
                var book = clientsTable.children().eq(index).find('.book');
                var edit = clientsTable.children().eq(index).find('.edit');
                var deleteButton = clientsTable.children().eq(index).find('.delete')

                edit.on('click', function(){
                    globalClientId = $(this).val()
                    console.log(globalClientId);

                    editClientName.val(name);
                    editClientCode.val(code);
                    editClientContact.val(contact);
                })

                deleteButton.on('click', function(){
                    let thisDelete = $(this);
                    if(confirm('Delete client?') == true){
                        loadingScreen.show();
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteClient.php',
                            data:{
                                client_id: thisDelete.val()
                            },
                            success: function(response){
                                loadingScreen.hide()
                                if(response == 'ok'){
                                    thisDelete.parent().parent().parent().parent().remove()
                                }
                            }
                        })
                    }
                })
                book.on('click', function(){
                    globalUserId = $(this).val()
                    clientPetsList.children().remove()
                    clientDetails.children().remove()
                    $.ajax({
                        type: 'POST',
                        url: 'php/getClientPets.php',
                        data:{
                            client_id: clientId
                        },
                        success: function(response){
                            var data = JSON.parse(response);
                            clientDetails.append(`<p>Client Name: <span class="fw-bold">${data.client_name}</span><br>
                                                    Client Code: <span class="fw-bold">${data.client_code}</span></p>`)
                            $(data.pets).each(function(index, value){
                                addToClientPetsList(index, value)
                            })
                        }
                    })
                })
                viewPets.on('click', function(){
                    globalUserId = $(this).val();
                    getClientPets()
                })
            }
            

            function getClientPets(){
                petsTable.children().remove();

                $.ajax({
                    type: 'POST',
                    url: 'php/getClientPets.php',
                    data:{
                        client_id: globalUserId,
                    },
                    success: function(response){
                        if(response != 'invalid session'){
                            var data = JSON.parse(response);
                            petsClientName.text("Client Name: " + data.client_name)
                            $(data.pets).each(function(index, value){
                                addToPetsTable(index, value.pet_id, value.name, value.breed, value.species, value.sex, value.age)
                            })
                        }else{
                            alert('Invalid Session.');
                        }
                    }
                })
            }

            function addToPetsTable(index, petId, name, breed, species, sex, age){
                petsTable.append(`<tr>
                                    <td>${name}</td>
                                    <td>${breed}</td>
                                    <td>${species}</td>
                                    <td>${sex}</td>
                                    <td>${age}</td>
                                    <td>
                                        <div class="dropdown">
                                            <button value="${petId}" class="pet-medical-records normal-outline-button dropdown-toggle" data-bs-toggle="dropdown">Actions</button>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <button value="${petId}" class="dropdown-item view-initial-checkup" data-bs-toggle="modal" data-bs-target="#wellness-record-modal">Appointment Records</button>
                                                </li>
                                                <li>
                                                    <button value="${petId}" class="view-medical-records dropdown-item" data-bs-toggle="modal" data-bs-target="#view-medical-records-modal">Patient Medical Records</button>
                                                </li>
                                                <li>
                                                    <button value="${petId}" class="view-medical-records dropdown-item edit-pet" data-bs-toggle="modal" data-bs-target="#edit-pet-modal">Edit</button>
                                                </li>
                                                <li>
                                                    <button value="${petId}" class="view-medical-records dropdown-item delete-pet">Delete</button>
                                                </li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>`);

                var viewInitalCheckup = petsTable.children().eq(index).find('.view-initial-checkup');
                var viewMedicalRecords = petsTable.children().eq(index).find('.view-medical-records');
                let editPet = petsTable.children().eq(index).find('.edit-pet');
                let deletePet = petsTable.children().eq(index).find('.delete-pet');

                editPet.on('click', function(){
                    globalPetId = $(this).val();

                    editPetName.val(name)
                    editPetBreed.val(breed)
                    editPetSpecies.val(species)
                    editPetSex.val(sex)
                    
                })

                deletePet.on('click', function(){
                    let thisDelete = $(this);
                    if(confirm('Delete this pet?') == true){
                        loadingScreen.show();
                        $.ajax({
                            type: 'POST',
                            url: 'php/deletePet.php',
                            data:{
                                pet_id: thisDelete.val()
                            },
                            success: function(response){
                                loadingScreen.hide();
                                if(response == 'ok'){
                                    thisDelete.parent().parent().parent().parent().parent().remove()
                                }
                            }
                        })
                    }
                })
                viewMedicalRecords.on('click', function(){
                    globalPetId = $(this).val();

                    getMedicalRecords();
                })
                viewInitalCheckup.on('click', function(){
                    globalPetId = $(this).val();
                    $('#initial-checkups-modal').find('input').val('');
                    $('#initial-checkups-modal').find('textarea').val('');
                    getPetWellnessRecords();
                })
                var petMedicalRecords = petsTable.children().eq(index).find('.pet-medical-records');
                petMedicalRecords.on('click', function(){
                    globalPetId = $(this).val();
                })
            }

            function getMedicalRecords(){
                medicalRecordsTable.children().remove();

                $.ajax({
                    type: 'POST',
                    url: 'php/getMedicalRecords.php',
                    data:{
                        pet_id: globalPetId,
                    },
                    success: function(response){
                        if(response != 0){
                            var data = JSON.parse(response);

                            medicalRecordClientName.text(data.client_name);
                            medicalRecordClientCode.text(data.client_code);
                            medicalRecordPetName.text(data.pet_name)
                            $(data.records).each(function(index, value){
                                
                                addToMedicalRecordsTable(index, value.id, value.pet_weight, value.temp, value.hr, value.rr, value.medical_history, value.chief_complain, value.tests, value.procedure, value.tdx_ddx_case, value.medication, value.case_closed, value.doctor_id, value.vet_nurse, value.created_at)
                                
                            })
                            
                        }else{
                            alert('Invalid Session. Please log in to continue');
                        }
                        
                    }
                })
            }
            
            function addToMedicalRecordsTable(index,id, weight, temp, hr, rr, medicalHistory, chiefComplain, tests, procedure, tdx, medication, caseClosed, doctorId, vetNurse, createdAt){
                medicalRecordsTable.append(`<tr>
                                                <td>${weight}</td>
                                                <td>${temp}</td>
                                                <td>${hr}</td>
                                                <td>${rr}</td>
                                                <td>${medicalHistory}</td>
                                                <td>${chiefComplain}</td>
                                                <td>${tests}</td>
                                                <td>${procedure}</td>
                                                <td>${tdx}</td>
                                                <td>${medication}</td>
                                                <td>${caseClosed}</td>
                                                <td>${doctorId}</td>
                                                <td>${vetNurse}</td>
                                                <td>${createdAt}</td>
                                                <td>
                                                    <button value="${id}" class="edit normal-outline-button" data-bs-toggle="modal" data-bs-target="#edit-medical-record-modal">Edit</button>
                                                    <button value="${id}" class="delete normal-outline-button">Delete</button>
                                                </td>
                                            </tr>`);
                let deleteButton = medicalRecordsTable.children().eq(index).find('.delete');
                let edit = medicalRecordsTable.children().eq(index).find('.edit');

                edit.on('click', function(){
                    globalMedicalRecordId = $(this).val();
                    editMedicalRecordWeight.val(weight)
                    editMedicalRecordTemp.val(temp)
                    editMedicalRecordHr.val(hr)
                    editMedicalRecordRR.val(rr)
                    editMedicalRecordHistory.val(medicalHistory)
                    editMedicalRecordChiefComplain.val(chiefComplain)
                    editMedicalRecordTests.val(tests)
                    editMedicalRecordProcedures.val(procedure)
                    editMedicalRecordTdx.val(tdx)
                    editMedicalRecordMedication.val(medication)
                })
                deleteButton.on('click', function(){
                    let thisDelete = $(this);
                    if(confirm('Delete this record?') == true){
                        
                        deleteButton.prop('disabled', true);
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteMedicalRecord.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                deleteButton.prop('disabled', false)
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove()
                                }
                            }
                        })
                    }
                    
                })
            }

            function getPetWellnessRecords(){
                wellnessRecordTable.children().remove();
                $.ajax({
                    type: 'POST',
                    url: 'php/getPetWellnessRecords.php',
                    data:{
                        pet_id: globalPetId,
                    },
                    success: function(response){
                        var data = JSON.parse(response);
                        recordsPetName.text(data.pet_name);
                        recordsClientName.text(data.client_name);
                        $(data.records).each(function(index, value){
                            addToWellnessRecordTable(index, value.next_service, value.id, value.service, value.doctor, value.doctor_id, value.remarks, value.date, value.next_appointment, value.pet_weight)
                        })
                    }
                })
            }

            function addToInitialCheckupsTable(id, medicalHistory, wellness, weight, temp, hr, rr, physicalExam, cchx, dxtools, tdx,treatment, inPatient, surgery, outPatient, takeHomeMeds, date){
                initialCheckupsTable.append(`<tr>
                                                <td>${medicalHistory}</td>
                                                <td>${wellness}</td>
                                                <td>${weight}</td>
                                                <td>${temp}</td>
                                                <td>${hr}</td>
                                                <td>${rr}</td>
                                                <td>${physicalExam}</td>
                                                <td>${cchx}</td>
                                                <td>${dxtools}</td>
                                                <td>${tdx}</td>
                                                <td>${treatment}</td>
                                                <td>${inPatient}</td>
                                                <td>${surgery}</td>
                                                <td>${outPatient}</td>
                                                <td>${takeHomeMeds}</td>
                                                <td>${date}</td>
                                            </tr>`)
            }


            function addToWellnessRecordTable(index,nextService, id, service, doctor, doctorId, remarks, date, nextAppointment, petWeight){
                wellnessRecordTable.append(`<tr>
                                                <td>${service}</td>
                                                <td>${petWeight}</td>
                                                <td>${doctor}</td>
                                                <td>${remarks}</td>
                                                <td>${date}</td>
                                                <td>${nextAppointment}</td>
                                                <td>${nextService}</td>
                                                <td>
                                                    <button value="${id}" class="edit normal-outline-button" data-bs-target="#edit-wellness-record-modal" data-bs-toggle="modal">Edit</button>
                                                    <button value="${id}" class="delete normal-outline-button">Delete</button>
                                                </td>
                                            </tr>`)
                let editRecord = wellnessRecordTable.children().eq(index).find('.edit');
                let deleteRecord = wellnessRecordTable.children().eq(index).find('.delete');

                editRecord.on('click', function(){
                    globalWellnessRecordId = $(this).val();
                    editService.val(service);
                    editPetWeight.val(petWeight);
                    editRemarks.val(remarks);
                })

                deleteRecord.on('click', function(){
                    let thisDelete = $(this);
                    if(confirm('Delete this record?') == true){
                        deleteRecord.prop('disabled', true);
                        deleteRecord.text('Deleting...');
                        $.ajax({
                            type: 'POST',
                            url: 'php/deleteWellnessRecord.php',
                            data:{
                                id: thisDelete.val()
                            },
                            success: function(response){
                                deleteRecord.prop('disabled', false);
                                deleteRecord.text('Delete');
                                if(response == 'ok'){
                                    thisDelete.parent().parent().remove();
                                }
                            }
                        })
                    }
                })
            }
        
            logout.on('click', function(){
                $.ajax({
                    type: 'GET',
                    url: 'php/logout.php',
                    success: function(response){
                        if(response == 'index.html'){
                            window.location.replace(response);
                        }
                    }
                })
            })
            navLink.on('click', function(){
                navLink.removeClass('active');
                $(this).addClass('active');
                
            })

            labRequestLink.on('click', function(){
                labRequestSection.show();
                appointmentSection.hide();
                clientSection.hide();
                servicesSection.hide();
                confinementSection.hide();
                getVetLabRequests();
            })

            clientLink.on('click', function(){
                appointmentSection.hide();
                clientSection.show();
                servicesSection.hide();
                labRequestSection.hide();
                confinementSection.hide();
                getClients();
                getProfile();
            })

            appointmentLink.on('click', function(){
                labRequestSection.hide();
                clientSection.hide();
                appointmentSection.show()
                servicesSection.hide();
                confinementSection.hide()
                getAppointments();
            })
            servicesLink.on('click', function(){
                labRequestSection.hide();
                servicesSection.show();
                clientSection.hide();
                appointmentSection.hide()
                getRenderedServices();
                laboratoryList.children().remove();
                emergencyList.children().remove();
                surgeryList.children().remove();
                confinementSection.hide();
            })

            confinementLink.on('click', function(){
                labRequestSection.hide();
                servicesSection.hide();
                clientSection.hide();
                appointmentSection.hide()
                confinementSection.show();

                getConfinedPets();
            })

            function getConfinedPets(){
                confinedPetsTable.children().remove();
                loadingScreen.show();
                $.ajax({
                    type: 'GET',
                    url: 'php/confinedPets.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);

                        $(data).each(function(index, value){
                            addToConfinementTable(index, value.name, value.id);
                        })
                    }
                })
            }

            function addToConfinementTable(index, name, id){
                confinedPetsTable.append(`<tr>
                                            <td>${name}</td>
                                            <td>
                                                <button value="${id}" class="view-confinement-details normal-outline-button">View Details</button>
                                            </td>
                                        </tr>`)
                var viewConfinementDetails = confinedPetsTable.children().eq(index).find('.view-confinement-details');

                viewConfinementDetails.on('click', function(){
                    icusTable.children().remove()
                    confinementRecordTable.children().remove()
                    infusionPumpsTable.children().remove()
                    confinementPatientDetails.children().remove()
                    syringePumpsTable.children().remove()
                    antibioticsTable.children().remove()
                    vitaminsTable.children().remove()
                    specialMedicinesTable.children().remove()
                    otherMedicinesTable.children().remove()
                    laboratoryTable.children().remove()
                    foodTable.children().remove()
                    ivCanullaTable.children().remove()
                    ivLineTable.children().remove()
                    ivFluidTable.children().remove()
                    underpadsTable.children().remove()
                    nebulizationTable.children().remove()
                    laserTable.children().remove()
                    oxygenTable.children().remove()
                    let confinementId = $(this).val();
                    globalConfinementId = confinementId;
                    confinementChargesModal.modal('show');
                    loadingScreen.show();
                    $.ajax({
                        type: 'POST',
                        url: 'php/confinementDetails.php',
                        data:{
                            confinement_id: confinementId
                        },
                        success: function(response){
                            loadingScreen.hide()
                            var data = JSON.parse(response);
                            $(data.icus).each(function(index, value){
                                addToICUSTable(index,value.date,value.price,value.id);
                            })

                            $(data.confinement_records).each(function(index, value){
                                addToConfinementRecordTable(index, value.date, value.price, value.id)
                            })

                            $(data.infusion_pumps).each(function(index, value){
                                addToInfusionPumpsTable(index, value.date, value.price, value.id)
                            })

                            $(data.syringe_pumps).each(function(index, value){
                                addToSyringePumpsTable(index, value.date, value.price, value.id)
                            })

                            $(data.antibiotics).each(function(index, value){
                                addToAntibioticsTable(index, value.id, value.antibiotic, value.price, value.date);
                            })
                            $(data.vitamins).each(function(index, value){
                                addToVitaminsTable(index, value.id, value.vitamins,value.price, value.date);
                            })

                            $(data.special_medicines).each(function(index, value){
                                addToSpecialMedicinesTable(index, value.id, value.special_medicine,value.price, value.date);
                            })
                            $(data.other_medicines).each(function(index, value){
                                addToOtherMedicinesTable(index, value.id, value.other_medicine,value.price, value.date);
                            })
                            $(data.laboratories).each(function(index, value){
                                addToLaboratoryTable(index, value.id, value.laboratory,value.price, value.date);
                            })

                            $(data.food).each(function(index, value){
                                addToFoodTable(index, value.id,value.price, value.date);
                            })
                            $(data.iv_canullas).each(function(index, value){
                                addToIvCanulla(index, value.id,value.price, value.date);
                            })
                            $(data.iv_lines).each(function(index, value){
                                addToIvLineTable(index, value.id,value.price, value.date);
                            })

                            $(data.iv_fluids).each(function(index, value){
                                addToIvFluidTable(index, value.id,value.price, value.date);
                            })

                            $(data.underpads).each(function(index, value){
                                addToUnderpadsTable(index, value.id,value.price, value.date);
                            })

                            $(data.nebulizations).each(function(index, value){
                                addToNebulization(index, value.id,value.price, value.date);
                            })

                            $(data.laser_therapies).each(function(index, value){
                                addToLaserTable(index, value.id,value.price, value.date);
                            })
                            $(data.oxygens).each(function(index, value){
                                addToOxygenTable(index, value.id, value.date,value.price, value.hours);
                            })

                            displayPatientDetails(data.pet_name, data.pet_weight, data.client_name, data.attending_vet, data.date)
                        }
                    })
                    
                })
            }

            function displayPatientDetails(petName, petWeight, clientName, attendingVet, date){
                confinementPatientDetails.append(`<p>Pet Name: <span class="fw-bold">${petName}</span><br>
                                        Pet Weight: <span class="fw-bold">${petWeight}</span><br>
                                        Client Name: <span class="fw-bold">${clientName}</span><br>
                                        Attending Vet: <span class="fw-bold">${attendingVet}</span><br>
                                        Date: <span class="fw-bold">${date}</span><br></p>`)
            }

            function addToConfinementStatusTable(index, status, date){
                confinementStatusTable.append(`<tr><td>${status}</td><td>${date}</td></tr>`);
            }

            loadingScreen.hide();
            function getVetLabRequests(){
                loadingScreen.show();
                vetLabRequestTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getVetLabRequests.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToLabRequestTableWithResults(index, value.time_limit, value.id, value.patient_name, value.result, value.request, value.date);
                        })
                    }
                })
            }

            function addToLabRequestTableWithResults(index, timeLimit, id, name, result, request, requestedAt){
                if(result == "Pending"){
                    vetLabRequestTable.append(`<tr>
                                                        <td>${name}</td>
                                                        <td>${request}</td>
                                                        <td>${timeLimit}</td>
                                                        <td>${result}</td>
                                                        <td>
                                                            <div class="input-group ig-upload">
                                                                <button value="${id}" class="upload btn btn-primary"><span class="upload-spinner spinner-border spinner-border-sm text-light"></span> Upload</button>
                                                                <input class="result form-control" type="file">
                                                            </div>
                                                        </td>
                                                        <td>${requestedAt}</td>
                                                    </tr>`)
                }else{
                    vetLabRequestTable.append(`<tr>
                                                        <td>${name}</td>
                                                        <td>${request}</td>
                                                        <td>${timeLimit}</td>
                                                        <td>
                                                            <button value="${id}" class="view-results btn btn-primary" data-bs-toggle="modal" data-bs-target="#doctor-view-lab-results-modal">Results</button>
                                                        </td>
                                                        <td>
                                                            <div class="input-group ig-upload">
                                                                <button value="${id}" class="upload btn btn-primary"><span class="upload-spinner spinner-border spinner-border-sm text-light"></span> Upload</button>
                                                                <input class="result form-control" type="file">
                                                            </div>
                                                        </td>
                                                        <td>${requestedAt}</td>
                                                    </tr>`)

                    var viewResults = vetLabRequestTable.children().eq(index).find('.view-results');
                    
                    viewResults.on('click', function(){
                        var thisViewResults = $(this);
                        doctorLabResultsList.children().remove();
                        $.ajax({
                            type: 'POST',
                            url: 'php/getLabResults.php',
                            data:{
                                lab_request_id: thisViewResults.val(),
                            },
                            success: function(response){
                                doctorLabResultPatientName.text(thisViewResults.parent().parent().children().eq(0).text())
                                doctorLabResultLabRequest.text(thisViewResults.parent().parent().children().eq(1).text())
                                doctorLabResultAttendingVet.text(thisViewResults.parent().parent().children().eq(2).text())
                                var data = JSON.parse(response);
                                $(data.results).each(function(index, value){
                                    addToDoctorLabResultsList(index, value.id, value.result);
                                })
                            }
                        })
                    })
                }
                
                var result = vetLabRequestTable.children().eq(index).find('.result');
                var upload = vetLabRequestTable.children().eq(index).find('.upload')
                var uploadSpinner = vetLabRequestTable.children().eq(index).find('.upload-spinner');

                uploadSpinner.hide();
                upload.on('click', function(){
                    
                    var thisUpload = $(this);
                    var labRequestId = $(this).val();
                    if(result.val() == ""){
                        result.addClass('is-invalid');
                    }else{
                        uploadSpinner.show();
                        upload.text('Uploading...')
                        upload.prop('disabled', true);
                        var formData = new FormData();

                        formData.append("result", result[0].files[0]);
                        formData.append("lab_request_id", labRequestId);

                        $.ajax({
                            type: 'POST',
                            url: 'php/submitLabResult.php',
                            data: formData,
                            contentType: false,
                            processData: false,
                            success: function(response){
                                uploadSpinner.hide();
                                upload.prop('disabled', false)
                                upload.text('Upload');
                                if(response == 'invalid file'){
                                    alert('Please upload image files only')
                                }else{
                                    alert('Lab result has been uploaded successfully.')
                                    window.location.reload();
                                }
                            }
                        })
                    }
                })
            }
            function getRenderedServices(){
                loadingScreen.show(); 
                $.ajax({
                    type: 'GET',
                    url: 'php/getRenderredServices.php',
                    success: function(response){
                        loadingScreen.hide();
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToServicesTables(value.date, value.category, value.service, value.lab_tech, value.soa_no);
                        })
                    }
                })
            }
            // addToSoaDetailsTable(index, value.service, value.base_price, value.amount, value.quantity, value.discounted, value.discount)

            function addToSoaDetailsTable(index, service, base_price, amount, quantity, discounted, discount){
                soaDetailsTable.append(`<tr>
                                            <td>${service}</td>
                                            <td>&#8369; ${base_price}</td>
                                            <td>&#8369; ${amount}</td>
                                            <td>${quantity}</td>
                                            <td>&#8369; ${discounted}</td>
                                            <td>${discount}%</td>
                                        </tr>`)
            }

            function addToServicesTables(date, category, service, labTech, soaNo){
                if(category == "laboratory"){
                    laboratoryList.append(`<tr>
                                                <td>${date}</td>
                                                <td>${service}</td>
                                                <td>${labTech}</td>
                                                <td><button class="btn btn-link soa-number" data-bs-target="#soa-details-modal" data-bs-toggle="modal">${soaNo}</button></td>
                                            </tr>`)

                    var soaNumber = laboratoryList.children().eq(laboratoryList.children().length - 1).find('.soa-number');

                    getSoaDetails(soaNumber);
                }else if(category == "emergency"){
                    emergencyList.append(`<tr>
                                                <td>${date}</td>
                                                <td>${service}</td>
                                                <td>${labTech}</td>
                                                <td><button class="btn btn-link soa-number" data-bs-target="#soa-details-modal" data-bs-toggle="modal">${soaNo}</button></td>
                                            </tr>`)
                    
                    var soaNumber = emergencyList.children().eq(emergencyList.children().length - 1).find('.soa-number');
                    getSoaDetails(soaNumber);
                    
                }else if(category == "surgery"){
                    surgeryList.append(`<tr>
                                                <td>${date}</td>
                                                <td>${service}</td>
                                                <td>${labTech}</td>
                                                <td><button class="btn btn-link soa-number" data-bs-target="#soa-details-modal" data-bs-toggle="modal">${soaNo}</button></td>
                                            </tr>`)
                    var soaNumber = surgeryList.children().eq(surgeryList.children().length - 1).find('.soa-number');

                    getSoaDetails(soaNumber);
                }
            }

            function getSoaDetails(soaNumber){
                soaNumber.on('click', function(){
                    console.log($(this));
                    var thisSoaNumber = $(this).text();
                    soaDetailsTable.children().remove()
                    paymentsTable.children().remove()
                    $.ajax({
                        type: 'POST',
                        url: 'php/getSoa.php',
                        data:{
                            soa_number: thisSoaNumber,
                        },
                        success: function(response){
                            var data = JSON.parse(response)
                            
                            soaClientName.text(data.client_name)
                            soaPatientName.text(data.patient_name)
                            soaClientCode.text(data.client_code)
                            medication.text(data.medication)
                            totalAmount.text(data.total_amount)
                            
                            soaAttendingVet.text(data.attending_vet)
                            

                            $(data.soa).each(function(index, value){
                                addToSoaDetailsTable(index, value.service, value.base_price, value.amount, value.quantity, value.discounted, value.discount)
                            })

                            $(data.payments_history).each(function(index, value){
                                paymentsTable.append(`<tr><td>&#8369; ${value.amount_renderred}</td><td>&#8369; ${value.balance}</td></tr>`)
                            })
                        }
                    })
                })
            }
        })
    </script>
    <title>The Furr Project</title>
</head>
<body>
    <nav class="sticky-top navbar navbar-expand-xxl text-light bg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <div class="d-lg-flex">
                    <img src="../images/thefurrproject.PNG" class="img-fluid rounded-2 shadow" style="width: 200px; height: auto">
                    <h5 class="fw-bold ms-lg-3 ms-0 mt-3 mt-lg-0 align-self-center" style="font-size: small" id="profile-name"></h5>
                </div>
                
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navMenu">
                <ul class="navbar-nav mb-2 mb-lg-0 ms-auto">
                    <li>
                        <button class="btn btn-light px-5 fw-bold mx-3 rounded-pill" data-bs-target="#add-client-modal" data-bs-toggle="modal" style="color: darkblue">
                            Add Client
                        </button>
                    </li>
                    <li>
                        <a id="appointment-link" class="navigation nav-link" href="#">Appointments</a>
                    </li>

                    <li>
                        <a id="confinement-link" class="navigation nav-link" href="#">Confinement</a>
                    </li>

                    <li>
                        <a href="#" id="lab-request-link" class="navigation nav-link">Lab Requests</a>
                    </li>

                    <li>
                        <a id="services-link" class="navigation nav-link" href="#">Services</a>
                    </li>
                    <li>
                        <a id="client-link" class="navigation nav-link active" href="#">Client Records</a>
                    </li>
                    <li>
                        <div class="dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Account</a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="#" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#enter-current-password-modal">Update Profile</a>
                                </li><li>
                                    <a id="logout" href="#" class="dropdown-item">Log Out</a>
                                </li>
                            </ul>
                        </div>
                        
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="modal fade" data-bs-backdrop="static" id="add-client-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input id="add-client-name" type="text" placeholder="Name" class="form-control">
                        <div id="add-client-name-error" class="invalid-feedback">

                        </div>
                    </div>
                    
                    <input id="add-client-email" type="email" placeholder="Email" class="form-control mt-3">
                    <div>
                        <input id="add-client-code" type="text" placeholder="Client Code" class="form-control mt-3">
                        <div class="invalid-feedback" id="add-client-code-error">

                        </div>
                    </div>
                   
                    <input id="add-client-contact" type="number" placeholder="Contact Number" class="form-control mt-3">
                    <button id="confirm-add-client" class="rounded-button mt-3">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <section id="lab-request-section">
        <div class="container">
            <div class="card shadow rounded-4 mx-auto mt-5">
                <div class="card-header">
                    <h3 class="fw-bold">
                        Lab Requests
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Patient Name</th>
                                <th scope="col">Laboratory Request</th>
                                <th scope="col">Time Limit</th>
                                <th scope="col">Result</th>
                                <th scope="col">Upload Result</th>
                                <th scope="col">Requested At</th>
                            </thead>
                            <tbody id="vet-lab-request-table">

                            </tbody>
                        </table>
                        
                    </div>
                </div>
            </div>
        </div>

    </section>

    <section id="clients-section">
        <div class="container">
           
            <div class="card shadow rounded-4 col-lg-8 mx-auto mt-5">
                <div class="card-header rounded-4 d-flex justify-content-between">
                    <h3 class="fw-bold">
                        Clients
                    </h3>
                    <div class="input-group" id="search">
                        <button id="search-client" class="btn btn-outline-primary">
                            Search
                        </button>
                        <input id="search-client-text" type="text" class="form-control" placeholder="Search">
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Client Name</th>
                                <th scope="col">Client Code</th>
                                <th scope="col">Contact Number</th>
                                <th scope="col">Last Appointment Attending Vet</th>
                                <th scope="col">Action</th>
                            </thead>
                            <tbody id="clients-table">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="appointments-section">
        <div class="container">

            <div class="row row-cols-1 row-cols-xl-3 g-5">
                <div class="col col-xl-3">
                    <div class="card shadow rounded-4 mt-5">
                        <div class="card-header">
                            <h5 class="fw-bold">
                                Previous Appointments
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Client Name</th>
                                        <th scope="col">Concern</th>
                                        <th scope="col">Date and Time</th>
                                    </thead>
                                    <tbody id="yesterday-appointment-list">

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col col-xl-6">
                    <div class="card shadow rounded-4 mx-auto mt-5">
                        <div class="card-header rounded-4">
                            <h3 class="fw-bold">
                                Today's Appointments
                            </h3>
                        </div>
                        <div class="card-body">
                            <div id="appointment-list">
        
                            </div>
                            <p id="no-appointments" class="lead p-5 text-center">
                                No Appointments
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col col-xl-3">
                    <div class="card shadow rounded-4 mt-5">
                        <div class="card-header">
                            <h5 class="fw-bold">
                                Upcoming Appointments
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Client Name</th>
                                        <th scope="col">Concern</th>
                                        <th scope="col">Date and Time</th>
                                    </thead>
                                    <tbody id="tomorrow-appointment-list">

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </section>

    <section id="services-section">
        <div class="container">
            <div class="card shadow rounded-4 col-lg-7 mx-auto mt-5">
                <div class="card-header rounded-4">
                    <h3 class="fw-bold">
                        Laboratory Services
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Date</th>
                                <th scope="col">Services</th>
                                <th scope="col">Attending Vet Tech</th>
                                <th scope="col">SOA #</th>
                            </thead>
                            <tbody id="laboratory-list">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card shadow rounded-4 col-lg-7 mx-auto mt-5">
                <div class="card-header rounded-4">
                    <h3 class="fw-bold">
                        Emergency Services
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Date</th>
                                <th scope="col">Services</th>
                                <th scope="col">Attending Vet Tech</th>
                                <th scope="col">SOA #</th>
                            </thead>
                            <tbody id="emergency-list">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card shadow rounded-4 col-lg-7 mx-auto mt-5">
                <div class="card-header rounded-4">
                    <h3 class="fw-bold">
                        Surgery Services
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Date</th>
                                <th scope="col">Services</th>
                                <th scope="col">Attending Vet Tech</th>
                                <th scope="col">SOA #</th>
                            </thead>
                            <tbody id="surgery-list">

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <div class="modal fade" id="pets-modal" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal">
                    </button>
                </div>
                <div class="modal-body">
                    <h3 class="fw-bold" id="client-name"></h3>
                    <hr>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Name</th>
                                <th scope="col">Breed</th>
                                <th scope="col">Species</th>
                                <th scope="col">Sex</th>
                                <th scope="col">Age</th>
                                <th scope="col">Action</th>
                            </thead>
                            <tbody id="pets-table">
                                
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-3">
                        <h3 class="fw-bold">
                            Add New Pet
                        </h3>
                        <hr>
                        <input id="insert-pet-name" type="text" class="form-control" placeholder="Name">
                        <input id="insert-pet-breed" type="text" class="form-control mt-3" placeholder="Breed">
                        <input id="insert-pet-species" type="text" class="form-control mt-3" placeholder="Species">
                        <label class="mt-3">
                            Sex:
                        </label>
                        <select class="form-select" id="insert-pet-sex">
                            <option value="MALE">MALE</option>
                            <option value="FEMALE">FEMALE</option>
                        </select>
                        <label class="mt-3">
                            Birth Date:
                        </label>
                        <input id="insert-pet-birth-date" type="date" class="form-control mt-3">
                        <button class="mt-3 rounded-button" id="confirm-insert-pet">
                            Confirm
                        </button>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="initial-checkups-modal" data-bs-backdrop="static">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Medical History</th>
                                <th scope="col">Wellness/Behavior</th>
                                <th scope="col">Weight</th>
                                <th scope="col">Temp</th>
                                <th scope="col">HR</th>
                                <th scope="col">RR</th>
                                <th scope="col">Physical Exam</th>
                                <th scope="col">CC/HX</th>
                                <th scope="col">Dx Tools</th>
                                <th scope="col">TDX/DX/CASE</th>
                                <th scope="col">Treatment</th>
                                <th scope="col">In-Patient</th>
                                <th scope="col">Surgery</th>s
                                <th scope="col">Out-Patient</th>
                                <th scope="col">Take Home Meds/Rx</th>
                                <th scope="col">Date</th>
                            </thead>
                            <tbody id="initial-check-ups-table">

                            </tbody>
                        </table>
                    </div>
                    <div class="col-lg-7 mx-auto">
                        <h3 class="fw-bold mt-5">Add Initial Checkup Record</h3>
                        <label>Date</label>
                        <input id="checkup-date" type="date" class="form-control">
                        <input id="medical-history" type="text" class="form-control mt-3" placeholder="Medical History">
                        <input id="wellness" type="text" class="form-control mt-3" placeholder="Wellness/Behavior">
                        <input id="weight" type="text" class="form-control mt-3" placeholder="Weight">
                        <input id="temp" type="text" class="form-control mt-3" placeholder="Temp">
                        <input id="hr" type="text" class="form-control mt-3" placeholder="HR">
                        <input id="rr" type="text" class="form-control mt-3" placeholder="RR">
                        <input id="physical-exam" type="text" class="form-control mt-3" placeholder="Physical Exam">
                        <input id="cc-hx" type="text" class="form-control mt-3" placeholder="CC/Hx">
                        <input id="dx-tools" type="text" class="form-control mt-3" placeholder="Dx Tools">
                        <input id="tdx" type="text" class="form-control mt-3" placeholder="TDX/DX/Case">
                        <input id="treatment" type="text" class="form-control mt-3" placeholder="Treatment">
                        <label>In-Patient</label>
                        <select id="in-patient" class="form-select">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <label for="">Surgery</label>
                        <select id="surgery" class="form-select">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <label for="">Out-Patient</label>
                        <select id="out-patient" class="form-select">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                        </select>
                        <textarea id="take-home-meds" class="form-control mt-3" placeholder="Take Home Meds"></textarea>
                        <button id="confirm-insert-medical-record" class="rounded-outline-button mt-3">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="edit-medical-record-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-target="#view-medical-records-modal" data-bs-toggle="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-floating">
                        <input id="edit-medical-record-weight" type="text" placeholder="Weight" class="form-control mt-3">
                        <label>Weight</label>
                    </div>
                    
                    <div class="form-floating">
                        <input id="edit-medical-record-temp" type="text" placeholder="Temp" class="form-control mt-3">
                        <label>Temp</label>
                    </div>
                    <div class="form-floating">
                        <input id="edit-medical-record-hr" type="text" placeholder="HR" class="form-control mt-3">
                        <label>HR</label>
                    </div>
                    <div class="form-floating">
                        <input id="edit-medical-record-rr" type="text" placeholder="RR" class="form-control mt-3">
                        <label>RR</label>
                    </div>
                    <div class="form-floating">
                        <input id="edit-medical-record-history" type="text" placeholder="Medical History" class="form-control mt-3">
                        <label>Medical History</label>
                    </div>
                    <div class="form-floating">
                        <input id="edit-medical-record-chief-complain" type="text" placeholder="Chief Complain" class="form-control mt-3">
                        <label>Chief Complain</label>
                    </div>
                    
                    <div class="form-floating">
                        <textarea id="edit-medical-record-tests" class="form-control mt-3" placeholder="Tests"></textarea>
                        <label>Tests</label>
                    </div>
                    <div class="form-floating">
                        <textarea id="edit-medical-record-procedures" class="form-control mt-3" placeholder="Procedures"></textarea>
                        <label>Procedures</label>
                    </div>
                    <div class="form-floating">
                        <textarea id="edit-medical-record-tdx-ddx-case" class="form-control mt-3" placeholder="TDX/DDX/Case"></textarea>
                        <label>TDX/DDX/Case</label>
                    </div>
                    <div class="form-floating">
                        <textarea id="edit-medical-record-medication" class="form-control mt-3" placeholder="Medication/RX"></textarea>
                        <label>Medication/RX</label>
                    </div>

                    <button class="rounded-button" id="confirm-edit-medical-record">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="wellness-record-modal" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-toggle="modal" data-bs-target="#pets-modal"></button>
                </div>
                <div class="modal-body">
                    <h4>Client's Name: <span class="fw-bold" id="records-client-name"></span></h4>
                    <h4>Pet's Name: <span class="fw-bold" id="records-pet-name"></span></h4>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Service</th>
                                <th scope="col">Pet Weight</th>
                                <th scope="col">Attending Vet</th>
                                <th scope="col">Remarks</th>
                                <th scope="col">Date</th>
                                <th scope="col">Next Appointment</th>
                                <th scope="col">Next Service</th>						
                            </thead>
                            <tbody id="wellness-record-table">
    
                            </tbody>
                        </table>
                    </div>
                    
                    
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="edit-password-modal" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input id="new-password" type="password" placeholder="New Password" class="form-control">
                        <div class="invalid-feedback" id="new-password-error"></div>
                    </div>
                    <div>
                        <input id="retype-new-password" type="password" placeholder="Retype New Password" class="form-control mt-3">
                        <div class="invalid-feedback" id="retype-new-password-error"></div>
                    </div>
                    
                    <button class="rounded-button mt-3" id="confirm-new-password">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" data-bs-backdrop="static" id="view-medical-records-modal">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-target="#pets-modal" data-bs-toggle="modal"></button>
                </div>
                <div class="modal-body">
                    <h3>Client Name: <span class="fw-bold" id="medical-record-client-name"></span></h3> 
                    <h3>Client Code: <span class="fw-bold" id="medical-record-client-code"></span></h3> 
                    <h3>Client Pet: <span class="fw-bold" id="medical-record-pet-name"></span></h3> 
                    <div class="table-responsive">
                        <table class="table table-striped" id="medical-record-table">
                            <thead>
                                <th scope="col">Weight</th>
                                <th scope="col">Temp</th>
                                <th scope="col">HR</th>
                                <th scope="col">RR</th>
                                <th scope="col">Medical History</th>
                                <th scope="col">Chief Complain</th>
                                <th scope="col">Tests</th>
                                <th scope="col">Procedure</th>
                                <th scope="col">TDX/DDX/Case</th>
                                <th scope="col">Medication</th>
                                <th scope="col">Case Closed</th>
                                <th scope="col">Attending Vet</th>
                                <th scope="col">Attending Vet Nurse</th>
                                <th scope="col">Date</th>
                                <th scope="col">Action</th>
                            </thead>
                            <tbody id="medical-records-table">

                            </tbody>
                        </table>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="view-lab-results-modal" data-bs-backdrop="static">
        <div class="modal-dialog moda-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-toggle="modal" data-bs-target="#create-patient-records-modal"></button>
                </div>
                <div class="modal-body">
                    <div class="sticky-top">
                        <p>Patient Name: <span class="fw-bold" id="lab-result-patient-name"></span></p>
                        <p>Lab Request: <span class="fw-bold" id="lab-result-lab-request"></span></p>
                        <p>Attending Vet: <span class="fw-bold" id="lab-result-attending-vet"></span></p>
                    </div>
                    <div id="lab-results-list">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="doctor-view-lab-results-modal" data-bs-backdrop="static">
        <div class="modal-dialog moda-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="sticky-top bg-light rounded-2 p-2">
                        <p>Patient Name: <span class="fw-bold" id="doctor-lab-result-patient-name"></span></p>
                        <p>Lab Request: <span class="fw-bold" id="doctor-lab-result-lab-request"></span></p>
                        <p>Attending Vet: <span class="fw-bold" id="doctor-lab-result-attending-vet"></span></p>
                    </div>
                    <div id="doctor-lab-results-list">

                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" data-bs-backdrop="static" id="soa-details-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="print-me">
                    <div class="bg-light rounded-3 p-3" id="client-info">
                        <p>Client Name: <span class="fw-bold" id="soa-client-name"></span></p>
                        <p>Patient Name: <span class="fw-bold" id="soa-patient-name"></span></p>
                        <p>Client Code: <span class="fw-bold" id="soa-client-code"></span></p>
                        <br>
                        <p class="fw-bold" id="medication-rx">Medication/Rx:</p>
                        <p id="medication"></p>
                    </div>

                    <div class="table-responsive mt-5">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Service</th>
                                <th scope="col">Base Price</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Amount</th>
                                <th scope="col">Amount(Discounted)</th>
                                <th scope="col">Discount</th>
                            </thead>
                            <tbody id="soa-details-table">
                                
                            </tbody>
                        </table>
                    </div>
                    <p id="total-amount-p">Total: &#8369 <span class="fw-bold" id="total-amount"></span></p>
                    <br>

                    <h5 class="fw-bold">Payment History</h5>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Amount</th>
                                <th scope="col">balance</th>
                            </thead>
                            <tbody id="payments-table">

                            </tbody>
                        </table>
                    </div>
                    <p class="text-center" id="footer">
                        <span class="fw-bold" id="attending-veterinarian">Attending Veterinarian</span><br>
                        <span id="soa-attending-vet"></span>
                    </p>
                    
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="enter-current-password-modal" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input placeholder="Enter Current Password" type="password" id="current-password" class="form-control">
                        <div class="invalid-feedback" id="current-password-error">

                        </div>
                    </div>
                    
                    <button id="confirm-password" class="rounded-button mt-3">Confirm</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" data-bs-backdrop="static" id="client-booking-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="client-details">

                    </div>

                    <h3 class="fw-bold">Pets List</h3>
                    <hr>
                    <div id="client-pets-list">

                    </div>

                    <button class="rounded-button mt-3" id="confirm-book">
                        <span class="spinner-border spinner-border-sm" id="confirm-book-spinner"></span><span class="ms-3">Book</span>
                    </button>
                </div>
            </div>
        </div>

    </div>
    
    


    <div class="modal fade" id="create-patient-records-modal" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img class="img-fluid" src="../images/thefurrproject.PNG" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    
                    
                    <div id="patient-details" class="sticky-top bg-light p-3">
                        <p>Client Name: <span id="patient-owner-name" class="fw-bold"></span></p>
                        <p>Patient Name: <span id="patient-name" class="fw-bold"></span></p>
                        <p>Client Code: <span id="client-code" class="fw-bold"></span></p>
                    </div>


                    <div class="card rounded-4 shadow mt-5">
                        <div class="card-header">
                            <h3 class="fw-bold text-center">PATIENT'S MEDICAL RECORD</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-floating">
                                <input id="medical-record-weight" type="text" placeholder="Weight" class="form-control mt-3">
                                <label>Weight</label>
                            </div>
                            
                            <div class="form-floating">
                                <input id="medical-record-temp" type="text" placeholder="Temp" class="form-control mt-3">
                                <label>Temp</label>
                            </div>
                            <div class="form-floating">
                                <input id="medical-record-hr" type="text" placeholder="HR" class="form-control mt-3">
                                <label>HR</label>
                            </div>
                            <div class="form-floating">
                                <input id="medical-record-rr" type="text" placeholder="RR" class="form-control mt-3">
                                <label>RR</label>
                            </div>
                            <div class="form-floating">
                                <input id="medical-record-history" type="text" placeholder="Medical History" class="form-control mt-3">
                                <label>Medical History</label>
                            </div>
                            <div class="form-floating">
                                <input id="medical-record-chief-complain" type="text" placeholder="Chief Complain" class="form-control mt-3">
                                <label>Chief Complain</label>
                            </div>
                            
                            <div class="form-floating">
                                <textarea id="medical-record-tests" class="form-control mt-3" placeholder="Tests"></textarea>
                                <label>Tests</label>
                            </div>
                            <div class="form-floating">
                                <textarea id="medical-record-procedures" class="form-control mt-3" placeholder="Procedures"></textarea>
                                <label>Procedures</label>
                            </div>
                            <div class="form-floating">
                                <textarea id="medical-record-tdx-ddx-case" class="form-control mt-3" placeholder="TDX/DDX/Case"></textarea>
                                <label>TDX/DDX/Case</label>
                            </div>
                            <div class="form-floating">
                                <textarea id="medical-record-medication" class="form-control mt-3" placeholder="Medication/RX"></textarea>
                                <label>Medication/RX</label>
                            </div>
                            <div class="form-floating">
                                <textarea class="form-control mt-3" type="text" id="medical-record-service" placeholder="Service"></textarea>
                                <label>Service</label>
                            </div>

                            <div class="form-floating">
                                <textarea class="form-control mt-3" id="medical-record-remarks" placeholder="Remarks"></textarea>
                                <label>Remarks</label>
                            </div>

                            <div class="card shadow rounded-4 mt-3">
                                <div class="card-header">
                                    <h3 class="fw-bold text-center">NEXT APPOINTMENT / NEXT SERVICE</h3>
                                </div>
                                <div class="card-body">
                                    <label>Case Closed</label>
                                    <select id="medical-record-case-closed" class="form-select mt-3">
                                        <option value="Yes">Yes</option>
                                        <option value="Yes">No</option>
                                    </select>
                                    <label class="mt-3">Next Appointment:</label>
                                    <input id="medical-record-next-appointment" type="date" class="form-control">

                                    <div class="form-floating mt-3">
                                        <input type="text" class="form-control" placeholder="Next Service" id="medical-record-next-service">
                                        <label for="medical-record-next-service">Next Service</label>
                                    </div>
                
                                    <label class="mt-3">Attending Vet Nurse:</label>
                                    <select class="form-select" id="choose-vet-assistant">
                                        
                                    </select>
                                    
        
                                    
                                    
                                </div>
                            </div>
                            
                            <button id="medical-record-confirm" class="rounded-button mt-3">Confirm</button>
                        </div>
                    </div>

                    
                    

                    <div class="card mt-2 rounded-4 shadow">
                        <div class="card-header">
                            <h3 class="text-center fw-bold">LABORATORY REQUEST <span><button id="refresh-lab-requests" class="btn btn-outline-primary"><span id="refresh-spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span><span>Refresh</span></button></h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date and Time</th>
                                        <th scope="col">Time Limit (min)</th>
                                        <th scope="col">Request</th>
                                        <th scope="col">Attending Vet Tech</th>
                                        <th scope="col">Attending Vet</th>
                                        <th scope="col">Result</th>
                                    </thead>
                                    <tbody id="lab-request-table">
        
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="dropdown">
                                <button id="choose-vet-tech" class="rounded-button dropdown-toggle" data-bs-toggle="dropdown">Choose Vet Tech</button>
                                <ul class="dropdown-menu" id="vet-tech-list">
                                    
                                </ul>
                            </div>
                            <div>
                                <textarea id="lab-request" class="form-control mt-3" placeholder="Enter Lab Request Here"></textarea>
                                <div class="invalid-feedback" id="lab-request-error"></div>
                            </div>
                            
                            <div>
                                <input id="time-limit" type="number" placeholder="Set Time Limit in minutes" class="form-control mt-3">
                                <div class="invalid-feedback" id="time-limit-error"></div>
                            </div>
                            
                            <button class="rounded-button mt-3" id="confirm-lab-request">Submit Lab Request</button>
                        </div>
                    </div>

                    <div class="card shadow rounded-4 mt-5">
                        <div class="card-header">
                            <h3 class="text-center fw-bold">
                                STATEMENT OF ACCOUNTS
                            </h3>
                            <p class="text-center"><em>Data inputted here will be recorded as history of services renderred by the attending Vet/attending Vet Tech</em></p>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Service</th>
                                        <th scope="col">Base Price</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Total Price</th>
                                        <th scope="col">Discount(%)</th>
                                    </thead>
                                    <tbody id="soa-table">
        
                                    </tbody>
                                </table>
                            </div>
                            <div class="dropdown">
                                <button id="choose-service" class="rounded-outline-button dropdown-toggle" data-bs-toggle="dropdown">
                                    Choose Service
                                </button>
                                <ul class="dropdown-menu" id="services-list">
                                    
                                </ul>
                            </div>

                            <div class="dropdown mt-3">
                                <button class="rounded-outline-button dropdown-toggle" id="service-attending-lab-tech" data-bs-toggle="dropdown">Choose Attending Vet Tech</button>
                                <ul class="dropdown-menu" id="service-attending-lab-tech-list">

                                </ul>
                            </div>
                            
                            <div>
                                <input type="number" placeholder="Base Price" id="base-price" class="mt-3 form-control">
                                <div class="invalid-feedback">
                                    Please fill out this field.
                                </div>
                            </div>
                            <div>
                                <input type="number" placeholder="Quantity" id="quantity" class="mt-3 form-control">
                                <div class="invalid-feedback">
                                    Please fill out this field
                                </div>
                            </div>
                            <button class="rounded-outline-button mt-3" id="confirm-service">Confirm Service</button>


                            <h4 class="fw-bold text-center mt-5">
                                Custom Service
                            </h4>
                            <div>
                                <input type="text" placeholder="Custom Service" id="custom-service" class="mt-2 form-control">
                                <div class="invalid-feedback">
                                    Please fill out this field.
                                </div>
                            </div>

                            <div class="dropdown mt-3">
                                <button class="rounded-outline-button dropdown-toggle" id="custom-service-attending-lab-tech" data-bs-toggle="dropdown">Choose Attending Vet Tech</button>
                                <ul class="dropdown-menu" id="custom-service-attending-lab-tech-list">

                                </ul>
                            </div>

                            

                            <select id="custom-service-category" class="mt-3 form-select">
                                <option value="laboratory">Laboratory</option>
                                <option value="emergency">Emergency</option>
                                <option value="surgery">Surgery</option>
                            </select>

                            <div>
                                <input type="number" placeholder="Base Price" id="custom-base-price" class="mt-3 form-control">
                                <div class="invalid-feedback">
                                    Please fill out this field.
                                </div>
                            </div>
                            <div>
                                <input type="number" placeholder="Quantity" id="custom-quantity" class="mt-3 form-control">
                                <div class="invalid-feedback">
                                    Please fill out this field
                                </div>
                            </div>
                            <button class="rounded-outline-button mt-3" id="confirm-custom-service">Confirm Custom Service</button>
                        </div>
                        <div class="card-footer">
                            <button class="rounded-button" id="submit-soa">Submit SOA</button>
                        </div>
                    </div>

                    
                </div>
            </div>
        </div>
    </div>


    <section id="confinement-section">
        <div class="container">
            <div class="card shadow col-lg-6 mx-auto mt-5 rounded-3">
                <div class="card-header">
                    <h3 class="fw-bold">
                        Confinement
                    </h3>
                </div>
                <div class="card-body">
                    <table class="table table-striped">
                        <thead>
                            <th scope="col">Name</th>
                            <th scope="col">Action</th>
                        </thead>
                        <tbody id="confined-pets-table">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>


    <div class="modal fade" data-bs-backdrop="static" id="confinement-charges-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="card shadow rounded-3">
                        <div id="confinement-patient-details" class="card-body">
                        
                        </div>
                    </div>
                    
                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Confinement</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="confinement-record-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">ICU</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="icus-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Infusion Pump</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="infusion-pumps-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Syringe Pump</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="syringe-pumps-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Antibiotics</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Antibiotic</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="antibiotics-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Vitamins/Supplements</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Vitamin/Supplement</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="vitamins-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Special Medicines</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Special Medicine</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="special-medicines-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Other Medicines</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Medicine</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="other-medicines-table">
        
                                    </tbody>
                                </table>
                            </div>
                           
                        </div>
                    </div>


                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Additional Laboratories</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Lab Procedure</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="laboratory-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Food</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="food-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">IV Canulla</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="iv-canulla-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">IV Line</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="iv-line-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">IV Fluid</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="iv-fluid-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Underpads</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="underpads-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Nebulization</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="nebulization-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Laser Therapy</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="laser-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow rounded-3 mt-3">
                        <div class="card-body">
                            <h3 class="fw-bold">Oxygen</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <th scope="col">Date</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Hours</th>
                                        <th scope="col">Action</th>
                                    </thead>
                                    
                                    <tbody id="oxygen-table">
        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <button class="mt-3 rounded-button" id="generate-confinement-soa">Generate SOA</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="edit-pet-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-toggle="modal" data-bs-target="#pets-modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input type="text" placeholder="Pet Name" class="form-control" id="edit-pet-name">
                        
                    </div>
                    <div>
                        <input type="text" placeholder="Pet Breed" class="form-control mt-3" id="edit-pet-breed">
                        
                    </div>
                    <div>
                        <input type="text" placeholder="Pet Species" class="form-control mt-3" id="edit-pet-species">
                        
                    </div>

                    

                    <label class="mt-3">Pet Sex:</label>
                    <select id="edit-pet-sex" class="form-select">
                        <option value="MALE">MALE</option>
                        <option value="FEMALE">FEMALE</option>
                    </select>

                    <div>
                        <label class="mt-3">Birth Date:</label>
                        <input type="date" placeholder="Birth Date" class="form-control" id="edit-pet-birth-date">
                    </div>

                    <button class="rounded-button mt-3" id="confirm-edit-pet">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    

    <div class="modal fade" id="edit-client-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div>
                        <input type="text" placeholder="Client Name" class="form-control" id="edit-client-name">
                        <div id="edit-client-name-error" class="invalid-feedback"></div>
                    </div>
                    <div>
                        <input type="text" placeholder="Client Email" class="form-control mt-3" id="edit-client-email">
                        <div id="edit-client-email-error" class="invalid-feedback"></div>
                    </div>
                    <div>
                        <input type="text" placeholder="Client Code" class="form-control mt-3" id="edit-client-code">
                        <div id="edit-client-code-error" class="invalid-feedback"></div>
                    </div>
                    <div>
                        <input type="number" placeholder="Client Email" class="form-control mt-3" id="edit-client-contact">
                        <div id="edit-client-contact-error" class="invalid-feedback"></div>
                    </div>

                    <button class="rounded-button mt-3" id="confirm-edit-client">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" data-bs-backdrop="static" id="edit-wellness-record-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-target="#wellness-record-modal" data-bs-toggle="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-floating">
                        <input type="text" placeholder="Service" class="form-control" id="edit-service">
                        <label for="edit-service">Service</label>
                    </div>
                    <div class="form-floating mt-3">
                        <input type="text" placeholder="Pet Weight" class="form-control" id="edit-pet-weight">
                        <label for="edit-pet-weight">Pet Weight</label>
                    </div>
                    <div class="form-floating mt-3">
                        <input type="text" placeholder="Remarks" class="form-control" id="edit-remarks">
                        <label for="edit-remarks">Remarks</label>
                    </div>
                    <label class="mt-3" for="edit-next-appointment">Next Appointment</label>
                    <input type="date" class="form-control" id="edit-next-appointment">
                    

                    <button class="rounded-button mt-3" id="confirm-edit-wellness-record">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-screen">
        <div class="card rounded-3 shadow">
            <div class="card body p-5">
                <span class="spinner-border text-primary"></span>
            </div>
        </div>
    </div>
</body>
</html>