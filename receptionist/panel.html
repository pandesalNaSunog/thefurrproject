<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="panelStyle.css">
    <script src="../js/jquery.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function(){
            var globalClientId = 0;
            var soaClientName = $('#soa-client-name');
            var soaClientCode = $('#soa-client-code');
            var soaPatientName = $('#soa-patient-name');
            var totalAmount = $('#total-amount');
            var todaysAppointmentTable = $('#todays-appointment-table');
            var navigation = $('.navigation');
            var soaSection = $('#soa-section');
            var appointmentsSection = $('#appointments-section')
            var viewSoaDetailsModal = $('#view-soa-details-modal');
            var confirmSearch = $('#confirm-search');
            var search = $('#search');

            var soaTable = $('#soa-table');
            var soaDetailsTable = $('#soa-details-table');
            var globalSoaId = 0;
            var soaLink = $('#soa-link');
            var appointmentsLink = $('#appointments-link');
            var amount = $('#amount');
            var confirmAmount = $('#confirm-amount');
            var clientSection = $('#clients-section');
            var clientsLink = $('#clients-link');
            var clientSearch = $('#client-search');
            var confirmClientSearch = $('#confirm-client-search');
            var clientsTable = $('#clients-table');
            var petsList = $('#pets-list');
            var clientCode = $('#client-code');
            var clientName = $('#client-name');
            var confirmBook = $('#confirm-book');
            var concern = $('#concern');
            var viewPetsModal = $('#view-pets-modal');
            var bookGrooming = $('#book-grooming');
            var groomingPrice = $('#grooming-price');
            var logout = $('#logout');
            var medication = $('#medication');
            var balanceText = $('#balance');
            var soaAttendingVet = $('#soa-attending-vet');
            var paymentsTable = $('#payments-table');
            var confinementChargesLink = $('#confinement-charges-link');
            var confinementChargesSection = $('#confinement-charges-section');
            var confinementChargesTable = $('#confinement-charges-table')
            let addClientName = $('#add-client-name');
            let addClientEmail = $('#add-client-email');
            let addCLientCode = $('#add-client-code');
            let addContact = $('#add-client-contact');
            let confirmAddClient = $('#confirm-add-client');
            let addClientModal = $('#add-client-modal')

            confirmAddClient.on('click', function(){
                if(confirm("Please Confirm.") == true){
                    disableButton(confirmAddClient);
                    $.ajax({
                        type: 'POST',
                        url: 'php/addClient.php',
                        data:{
                            name: addClientName.val(),
                            email: addClientEmail.val(),
                            contact: addContact.val(),
                            code: addCLientCode.val(),
                        },
                        success: function(response){
                            enableButton(confirmAddClient);
                            let data = JSON.parse(response);
                            addClientName.val('');
                            addClientEmail.val('');
                            addCLientCode.val('')
                            addContact.val('');
                            addClientModal.modal('hide');
                            addToClientsTable(clientsTable.children().length, data.id, data.name, data.client_code)
                        }
                    })
                }
            })
            confinementChargesSection.hide();
            logout.on('click', function(){
                if(confirm('Are your sure you want to Log Out?')){
                    $.ajax({
                        type: 'POST',
                        url: 'php/logout.php',
                        success: function(response){
                            if(response == 'ok'){
                                window.location.replace('index.html')
                            }
                        }
                    })
                }
            })
            groomingPrice.on('keydown', function(){
                groomingPrice.removeClass('is-invalid');
            })

            concern.on('keydown', function(){
                concern.removeClass('is-invalid');
            })

            function disableButton(button){
                button.prop('disabled', true);
            }
            function enableButton(button){
                button.prop('disabled', false);
            }

            bookGrooming.on('click', function(){
                var petIds = [];
                var petWeight = [];
                petsList.children().find('.form-check-input').each(function(){
                    if($(this).prop("checked") == true){
                        petIds.push($(this).val());
                    }
                })

                petsList.children().find('.weight').each(function(){
                    console.log($(this).val());
                    petWeight.push($(this).val());
                })

                if(petIds.length < 1){
                    alert("Please choose atleast one pet.");
                }else if(groomingPrice.val() == ""){
                    groomingPrice.addClass('is-invalid');
                }else{
                    if(confirm('Confirm Book for Grooming?') == true){
                        $.ajax({
                            type: 'POST',
                            url: 'php/bookGrooming.php',
                            data:{
                                user_id: globalClientId,
                                pet_ids: petIds,
                                weight: petWeight,
                                price: groomingPrice.val(),
                            },
                            success: function(response){
                                if(response == 'ok'){
                                    alert('Successfully Booked');
                                    viewPetsModal.modal('hide');
                                }
                            }
                        })
                    }
                }
            })
            confirmBook.on('click', function(){
                var petIds = [];

                petsList.children().find('input').each(function(){
                    if($(this).prop("checked") == true){
                        petIds.push($(this).val());
                    }
                })


                if(petIds.length < 1){
                    alert("Please choose atleast one pet.");
                }else if(concern.val() == ""){
                    concern.addClass('is-invalid');
                }else{
                    if(confirm('Confirm Booking? Please consider reviewing the details') == true){
                        $.ajax({
                            type: 'POST',
                            url: 'php/walkInBook.php',
                            data:{
                                user_id: globalClientId,
                                concern: concern.val(),
                                pet_ids: petIds
                            },
                            success: function(response){
                                if(response == "ok"){
                                    alert('Successfully Booked');
                                    concern.val('');
                                    viewPetsModal.modal('hide');
                                }
                            }
                        })
                    }
                }
            })


            clientSearch.on('keydown', function(){
                clientSearch.removeClass('is-invalid');
            })
            confirmClientSearch.on('click', function(){
                if(clientSearch.val() == ""){
                    clientSearch.addClass('is-invalid');
                }else{
                    clientSearch.removeClass('is-invalid');
                    $.ajax({
                        type: 'POST',
                        url: 'php/searchClient.php',
                        data:{
                            keyword: clientSearch.val(),
                        },
                        success: function(response){
                            var data = JSON.parse(response);
                            clientsTable.children().remove();
                            $(data).each(function(index, value){
                                addToClientsTable(index, value.id, value.name, value.client_code);
                            })
                        }
                    })
                }
            })

            function addToClientsTable(index, id, name, code){
                clientsTable.append(`<tr>
                                        <td>${name}</td>
                                        <td>${code}</td>
                                        <td>
                                            <button value="${id}" class="book btn btn-primary" data-bs-toggle="modal" data-bs-target="#view-pets-modal">Book</button>
                                        </td>
                                    </tr>`)

                var book = clientsTable.children().eq(index).find('.book');

                book.on('click', function(){
                    globalClientId = $(this).val();
                    petsList.children().remove();
                    clientName.text($(this).parent().parent().children().eq(0).text())
                    clientCode.text($(this).parent().parent().children().eq(1).text())
                    $.ajax({
                        type: 'POST',
                        url: 'php/viewPets.php',
                        data:{
                            user_id: globalClientId,
                        },
                        success: function(response){
                            var data = JSON.parse(response);

                            $(data).each(function(index, value){
                                addToPetsList(index, value.name, value.id, value.breed, value.species);
                            })
                        }
                    })
                })
            }

            function addToPetsList(index, name, id, breed, species){
                petsList.append(`<div class="card shadow rounded-4 mt-3">
                                    <div class="card-body">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="${id}">
                                            <label class="form-check-label">
                                                ${name}
                                            </label>
                                        </div>
                                        <p>Species: <span class="fw-bold">${species}</span><br>
                                            Breed: <span class="fw-bold">${breed}</span></p>
                                        <input class="weight form-control mt-3" placeholder="Weight">
                                    </div>
                                </div>`)
            }






            search.on('keydown', function(){
                search.removeClass('is-invalid');
            })
            confirmSearch.on('click', function(){
                if(search.val() == ""){
                    search.addClass('is-invalid');
                }else{
                    soaTable.children().remove();
                    $.ajax({
                        type: 'POST',
                        url: 'php/searchSoa.php',
                        data:{
                            keyword: search.val(),
                        },
                        success: function(response){
                            var data = JSON.parse(response);
                            $(data).each(function(index, value){
                                addToSoaTable(index, value.id, value.client_name, value.patient_name, value.soa_number, value.date, value.balance)
                            })
                        }
                    })
                }
            })


            amount.on('keydown', function(){
                amount.removeClass('is-invalid');
            })
            confirmAmount.on('click', function(){
                if(amount.val() == ""){
                    amount.addClass('is-invalid');
                }else{
                    $.ajax({
                        type: 'POST',
                        url: 'php/pay.php',
                        data:{
                            amount: amount.val(),
                            soa_id: globalSoaId
                        },
                        success: function(response){
                            let data = JSON.parse(response);

                            addToPaymentsTable(paymentsTable.children(), data.amount_renderred, data.balance, data.date);
                        }
                    })
                }
            })

            confinementChargesLink.on('click', function(){
                appointmentsSection.hide();
                clientSection.hide();
                soaSection.hide();
                confinementChargesSection.show()
                getConfinementSoas()
            })
            soaLink.on('click', function(){
                appointmentsSection.hide();
                clientSection.hide();
                soaSection.show();
                confinementChargesSection.hide()
                getSoas();
            });
            appointmentsLink.on('click', function(){
                appointmentsSection.show();
                soaSection.hide();
                clientSection.hide();
                confinementChargesSection.hide()
                getTodaysAppointments();
            })

            clientsLink.on('click', function(){
                appointmentsSection.hide();
                soaSection.hide();
                clientSection.show();
                confinementChargesSection.hide()
                getClients();
            })

            function getConfinementSoas(){
                confinementChargesTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/confinementSoas.php',
                    success: function(response){
                        let data = JSON.parse(response);

                        $(data).each(function(index, value){
                            addToConfinementChargesTable(index, value.client_name, value.pet_name, value.soa_number, value.balance, value.date);
                        })
                    }
                })
            }

            function addToConfinementChargesTable(index, clientName, petName, soaNumber, balance, date){

                confinementChargesTable.append(`<tr>
                                                    <td>${clientName}</td>
                                                    <td>${petName}</td>
                                                    <td>${soaNumber}</td>
                                                    <td>${date}</td>
                                                    <td>&#8369; ${balance}</td>
                                                    
                                            </tr>`)
            }

            function getClients(){
                clientsTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/clients.php',
                    success: function(response){
                        var data = JSON.parse(response);

                        $(data).each(function(index, value){
                            addToClientsTable(index, value.id, value.name, value.client_code)
                        })
                    }
                })
            }

            session();
            getTodaysAppointments();
            soaSection.hide();
            clientSection.hide();


            navigation.on('click', function(){
                navigation.removeClass('active');
                $(this).addClass('active');
            })

            function session(){
                $.ajax({
                    type: 'GET',
                    url: 'php/session.php',
                    success: function(response){
                        if(response != 'ok'){
                            window.location.replace('index.html');
                        }
                    }
                })
            }


            function getTodaysAppointments(){
                todaysAppointmentTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getTodaysAppointments.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToTodaysAppointmentTable(index, value.client_name, value.date, value.doctor, value.pet)
                        })
                    }
                })
            }

            function addToTodaysAppointmentTable(index, clientName, date, doctor, pet){
                todaysAppointmentTable.append(`<tr><td>${date}</td><td>${doctor}</td><td>${clientName}</td><td>${pet}</td></tr>`)
            }
            function getSoas(){
                soaTable.children().remove();
                $.ajax({
                    type: 'GET',
                    url: 'php/getSoa.php',
                    success: function(response){
                        var data = JSON.parse(response);
                        $(data).each(function(index, value){
                            addToSoaTable(index, value.id, value.client_name, value.patient_name, value.soa_number, value.date, value.balance)
                        })
                    }
                })
            }

            function addToSoaTable(index, id, clientName, pet, soaNumber, date, balance){
                soaTable.append(`<tr>
                                    <td>${clientName}</td>
                                    <td>${pet}</td>
                                    <td><button value="${id}" class="view-soa-details btn btn-link" data-bs-toggle="modal" data-bs-target="#view-soa-details-modal">${soaNumber}</button></td>
                                    <td>${date}</td>
                                    <td>&#8369; ${balance}</td>
                                </tr>`)

                var viewSoaDetails = soaTable.children().eq(index).find('.view-soa-details');

                viewSoaDetails.on('click', function(){
                    var thisViewSoaDetails = $(this);
                    soaDetailsTable.children().remove();
                    paymentsTable.children().remove();
                    medication.text('NONE');
                    balanceText.text('');
                    totalAmount.text('');
                    soaClientCode.text('');
                    soaClientName.text('');
                    soaPatientName.text('');
                    globalSoaId = thisViewSoaDetails.val();
                    soaAttendingVet.text('');
                    
                    $.ajax({
                        type: 'POST',
                        url: 'php/getSoaDetails.php',
                        data:{
                            soa_id: thisViewSoaDetails.val(),
                        },
                        success: function(response){
                            var data = JSON.parse(response);
                            soaClientName.text(data.client_name);
                            soaPatientName.text(data.patient_name);
                            soaClientCode.text(data.client_code);
                            totalAmount.text(data.total_amount);
                            medication.text(data.medication);
                            balanceText.text(data.balance);
                            soaAttendingVet.text(data.attending_vet);

                            
                            
                            $(data.soa).each(function(index, value){
                                addToSoaDetailsTable(index, value.service, value.base_price, value.amount, value.quantity, value.discounted, value.discount);
                            })

                            $(data.payments_history).each(function(index, value){
                                addToPaymentsTable(index, value.amount_renderred, value.balance,value.date)
                            })
                        }
                    })
                })
            }

            function addToPaymentsTable(index, amount, balance, date){
                paymentsTable.append(`<tr>
                                        <td>&#8369;${amount}</td>
                                        <td>&#8369; ${balance}</td>
                                        <td>${date}</td>
                                    </tr>
                    `)
            }

            function addToSoaDetailsTable(index, service, basePrice, amount, quantity, discounted, discount){
                soaDetailsTable.append(`<tr>
                                            <td>${service}</td>
                                            <td>${basePrice}</td>
                                            <td>${quantity}</td>
                                            <td>&#8369 ${amount}</td>
                                            <td>&#8369 ${discounted}</td>
                                            <td>${discount}%</td>
                                        </tr>`)
            }
        })
    </script>
    <title>The Furr Project</title>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color:darkblue">
        <div class="container">
            <div class="navbar-brand">
                <img src="../images/thefurrproject.PNG" style="width: 200px; height: auto" class="rounded-3">
            </div>
            <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navmenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav ms-auto fw-bold">
                    <li class="nav-item">
                        <button data-bs-target="#add-client-modal" data-bs-toggle="modal" class="px-5 w-100 mt-3 mt-lg-0 w-lg-0 btn btn-light rounded-pill fw-bold" style="color: darkblue">Add Client</button>
                    </li>
                    
                    <li class="nav-item">
                        <a href="#" id="appointments-link" class="navigation nav-link active">
                            Appointments
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" id="clients-link" class="navigation nav-link">
                            Clients
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" id="soa-link" class="navigation nav-link">
                            Statement of Accounts
                        </a>
                    </li>

                    <li class="nav-item">
                        <a href="#" id="confinement-charges-link" class="navigation nav-link">
                            Confinement Charges
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a id="logout" href="#" class="nav-link">
                            Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="modal fade" id="add-client-modal" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="add-client-name" placeholder="a">
                        <label for="add-client-name">Client Name</label>
                    </div>
                    <div class="form-floating">
                        <input type="text" class="form-control mt-3" id="add-client-email" placeholder="a">
                        <label for="add-client-name">Client Email</label>
                    </div>
                    <div class="form-floating">
                        <input type="text" class="form-control mt-3" id="add-client-code" placeholder="a">
                        <label for="add-client-name">Client Code</label>
                    </div>
                    <div class="form-floating">
                        <input type="number" class="form-control mt-3" id="add-client-contact" placeholder="a">
                        <label for="add-client-name">Contact Number</label>
                    </div>

                    <button id="confirm-add-client" class="btn btn-primary rounded-pill w-100 mt-3">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <section id="soa-section">
        <div class="container">
            
            <div class="card col-lg-7 mt-5 mx-auto shadow rounded-4">
                <div class="card-header d-flex">
                    <h3 class="fw-bold">
                        Statement of Accounts
                    </h3>
                    <div class="ms-auto input-group" id="search-input">
                        <button id="confirm-search" class="btn btn-outline-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                          </svg></button>
                        <input id="search" type="text" class="form-control" placeholder="Search here">
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Client Name</th>
                                <th scope="col">Patient Name</th>
                                <th scope="col">SOA #</th>
                                <th scope="col">Date and Time</th>
                                <th scope="col">Balance</th>
                            </thead>
                            <tbody id="soa-table">
    
                            </tbody>
                        </table>
                    </div>
                </div>
                
            </div>
        </div>
    </section>


    <section id="clients-section">
        <div class="container">
            <div class="card col-lg-6 mx-auto shadow rounded-4 mt-5">
                <div class="card-header">
                    <div class="row row-cols-1 row-cols-lg-2">
                        <div class="col">
                            <h3 class="fw-bold">Clients</h3>
                        </div>
                        <div class="col">
                            <div class="ms-auto input-group">
                                <button id="confirm-client-search" class="btn btn-outline-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                  </svg></button>
                                <input id="client-search" type="text" class="form-control" placeholder="Search Client Name or Client Code">
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Client Name</th>
                                <th scope="col">Client Code</th>
                                <th scope="col">Action</th>
                            </thead>
                            <tbody id="clients-table">

                            </tbody>
                        </table>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>


    <section id="appointments-section">
        <div class="container">
            <div class="card mt-5 col-lg-6 mx-auto shadow rounded-4">
                <div class="card-header">
                    <h3 class="fw-bold">
                        Today's Appointments
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Date</th>
                                <th scope="col">Attending Vet</th>
                                <th scope="col">Client Name</th>
                                <th scope="col">Patient Name</th>
                            </thead>
                            <tbody id="todays-appointment-table">
    
                            </tbody>
                        </table>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <section id="confinement-charges-section">
        <div class="container">
            <div class="card mt-5 col-lg-6 mx-auto shadow rounded-4">
                <div class="card-header">
                    <h3 class="fw-bold">
                        Confinement Charges
                    </h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Client Name</th>
                                <th scope="col">Patient Name</th>
                                <th scope="col">SOA #</th>
                                <th scope="col">Date and Time</th>
                                <th scope="col">Balance</th>
                            </thead>
                            <tbody id="confinement-charges-table">
    
                            </tbody>
                        </table>
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <div class="modal fade" data-bs-backdrop="static" id="view-soa-details-modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="print-me">
                    
                    <div class="bg-light rounded-3 p-3" id="client-info">
                        <p>Client Name: <span class="fw-bold" id="soa-client-name"></span></p>
                        <p>Patient Name: <span class="fw-bold" id="soa-patient-name"></span></p>
                        <p>Client Code: <span class="fw-bold" id="soa-client-code"></span></p>
                        <br>
                        <p class="fw-bold" id="medication-rx">Medication/Rx:</p>
                        <p id="medication"></p>
                    </div>

                    <div class="table-responsive mt-5">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Service</th>
                                <th scope="col">Base Price</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Amount</th>
                                <th scope="col">Amount(Discounted)</th>
                                <th scope="col">Discount</th>
                            </thead>
                            <tbody id="soa-details-table">
                                
                            </tbody>
                        </table>
                    </div>
                    <p id="total-amount-p">Total: &#8369 <span class="fw-bold" id="total-amount"></span></p>
                    <br>

                    <h5 class="fw-bold">Payment History</h5>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <th scope="col">Amount</th>
                                <th scope="col">Balance</th>
                                <th scope="col">Date and Time</th>
                            </thead>
                            <tbody id="payments-table">

                            </tbody>
                        </table>
                    </div>
                    <p class="text-center" id="footer">
                        <span class="fw-bold" id="attending-veterinarian">Attending Veterinarian</span><br>
                        <span id="soa-attending-vet"></span>
                    </p>
                    
                </div>
                
                <div class="modal-footer">
                    
                    <div class="input-group">
                        
                        <input id="amount" type="number" placeholder="Amount Renderred" class="form-control">
                        <div class="invalid-feedback">
                            Please fill out this field
                        </div>
                        <button id="confirm-amount" class="btn btn-primary">Confirm</button>
                        
                        
                    </div>

                    <button class="btn btn-primary w-100 mt-3" id="print">Print SOA</button>
                    <script>
                        var print = $('#print');
                        
                        print.on('click', function(){
                            var printMe = document.getElementById('print-me');
                            var printArea = window.open('Print');
                            printArea.document.write(`<head>
                                                        <style>
                                                            @media screen{
                                                                *{
                                                                    display: none;
                                                                }
                                                            }
                                                            @media print{
                                                                *{
                                                                    font-family: sans-serif
                                                                }
                                                                .fw-bold{
                                                                    font-weight: bold
                                                                }
                                                                table{
                                                                    font-family: Arial, Helvetica, sans-serif;
                                                                    border-collapse: collapse;
                                                                    width: 100%;
                                                                    text-align: left;
                                                                    margin-top: 30px;
                                                                }

                                                                thead tr{
                                                                    border-radius: 50px;
                                                                    background-color: darkblue;
                                                                    color:white;
                                                                    font-weight: bold;
                                                                }
                                                                thead th{
                                                                    padding: 10px;
                                                                }
                                                                td{
                                                                    padding: 10px;
                                                                    border-bottom: 1px solid gray;
                                                                }
                                                                h1{
                                                                    padding: 10px;
                                                                    border-bottom: 1px solid darkblue;
                                                                    margin-top: 50px;
                                                                    font-family: serif;
                                                                    text-align: center;
                                                                    font-weight: bold;
                                                                }
                                                                #medication-rx{
                                                                    font-weight: bold;
                                                                }
                                                                #soa-title{
                                                                    letter-spacing: 5px;
                                                                    text-align: center;
                                                                }
                                                                #total-amount-p{
                                                                    margin-top: 30px;
                                                                }

                                                                #total-amount-p, #balance-p{
                                                                    text-align: right;
                                                                }

                                                                #client-info{
                                                                    margin-top: 50px;
                                                                }

                                                                #attending-veterinarian{
                                                                    font-size: 20px;
                                                                }

                                                                #footer{
                                                                    margin-top: 50px;
                                                                    text-align: center;
                                                                    line-height: 1.5;
                                                                }
                                                            }
                                                        </style>
                                                    </head>
                                                    <div style="display: flex; justify-content: center">
                                                        <img src="../images/thefurrproject.PNG" alt="" class="img-fluid">
                                                    </div>
                                                    <hr>
                                                    <h3 id="soa-title">STATEMENT OF ACCOUNTS</h3>
                                                    `+printMe.innerHTML)
                            printArea.print()
                            printArea.close()
                            window.focus()
                        })
                    </script>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="view-pets-modal" data-bs-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <img src="../images/thefurrproject.PNG" class="img-fluid" alt="">
                    </div>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Client's Name: <span class="fw-bold" id="client-name"></span></p>
                    <p>Client Code: <span class="fw-bold" id="client-code"></span></p>
                    <h3 class="fw-bold mt-3">Pets</h3>
                    <hr>
                    <div id="pets-list">

                    </div>
                    <div>
                        <input id="concern" type="text" placeholder="Concern" class="form-control mt-3">
                        <div class="invalid-feedback">
                            Please fill out this field
                        </div>
                    </div>
                    <button id="confirm-book" class="btn btn-primary rounded-pill w-100 mt-3">Confirm</button>
                    <hr>
                    <h3 class="fw-bold mt-4">
                        For Grooming
                    </h3>
                    <div>
                        <input type="number" placeholder="Price" class="form-control mt-3" id="grooming-price">
                        <div class="invalid-feedback">
                            Please fill out this field.
                        </div>
                    </div>
                    
                    <button class="btn btn-primary w-100 rounded-pill mt-3" id="book-grooming">Book</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>



